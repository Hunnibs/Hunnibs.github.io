<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="en" /><updated>2025-03-26T02:01:46+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Hunnibs</title><subtitle>About my work history &amp; review
</subtitle><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><entry><title type="html">[ê°€ìƒ ë©´ì ‘ ì‚¬ë¡€ë¡œ ë°°ìš°ëŠ” ëŒ€ê·œëª¨ ì‹œìŠ¤í…œ ì„¤ê³„ ê¸°ì´ˆ] ì•ˆì • í•´ì‹œ</title><link href="http://localhost:4000/categories/pjt/2024-06-30-pjt-consitentHash_1/" rel="alternate" type="text/html" title="[ê°€ìƒ ë©´ì ‘ ì‚¬ë¡€ë¡œ ë°°ìš°ëŠ” ëŒ€ê·œëª¨ ì‹œìŠ¤í…œ ì„¤ê³„ ê¸°ì´ˆ] ì•ˆì • í•´ì‹œ" /><published>2024-06-30T00:00:00+09:00</published><updated>2024-07-02T11:46:47+09:00</updated><id>http://localhost:4000/categories/pjt/pjt-consitentHash_1</id><content type="html" xml:base="http://localhost:4000/categories/pjt/2024-06-30-pjt-consitentHash_1/"><![CDATA[<ul id="markdown-toc">
  <li><a href="#intro" id="markdown-toc-intro">Intro</a>    <ul>
      <li><a href="#í•´ì‹±hashingì´ë€-ë¬´ì—‡ì¸ê°€" id="markdown-toc-í•´ì‹±hashingì´ë€-ë¬´ì—‡ì¸ê°€">í•´ì‹±(Hashing)ì´ë€ ë¬´ì—‡ì¸ê°€?</a></li>
    </ul>
  </li>
  <li><a href="#ì›ì¸" id="markdown-toc-ì›ì¸">ì›ì¸</a>    <ul>
      <li><a href="#í•´ì‹œ-í‚¤-ì¬ë°°ì¹˜refresh-ë¬¸ì œ" id="markdown-toc-í•´ì‹œ-í‚¤-ì¬ë°°ì¹˜refresh-ë¬¸ì œ">í•´ì‹œ í‚¤ ì¬ë°°ì¹˜(refresh) ë¬¸ì œ</a></li>
    </ul>
  </li>
  <li><a href="#í•´ê²°-ë°©ì•ˆ" id="markdown-toc-í•´ê²°-ë°©ì•ˆ">í•´ê²° ë°©ì•ˆ</a>    <ul>
      <li><a href="#ì•ˆì •-í•´ì‹œconsistent-hash" id="markdown-toc-ì•ˆì •-í•´ì‹œconsistent-hash"><strong>ì•ˆì • í•´ì‹œ(Consistent Hash)</strong></a></li>
      <li><a href="#hash-ring" id="markdown-toc-hash-ring">Hash ring</a></li>
    </ul>
  </li>
  <li><a href="#ì•ˆì •-í•´ì‹œ-ë¬¸ì œì ê³¼-í•´ê²°-ë°©ì•ˆ" id="markdown-toc-ì•ˆì •-í•´ì‹œ-ë¬¸ì œì ê³¼-í•´ê²°-ë°©ì•ˆ">ì•ˆì • í•´ì‹œ ë¬¸ì œì ê³¼ í•´ê²° ë°©ì•ˆ</a>    <ul>
      <li><a href="#ë¬¸ì œì " id="markdown-toc-ë¬¸ì œì ">ë¬¸ì œì </a></li>
      <li><a href="#í•´ê²°-ë°©ì•ˆ-1" id="markdown-toc-í•´ê²°-ë°©ì•ˆ-1">í•´ê²° ë°©ì•ˆ</a></li>
    </ul>
  </li>
  <li><a href="#ë§ˆë¬´ë¦¬" id="markdown-toc-ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</a></li>
</ul>
<h2 id="intro">Intro</h2>

<hr />

<p>ì•ˆì • í•´ì‹œëŠ” ìˆ˜í‰ì  í™•ì¥ì„ ê³ ë ¤í•  ë•Œ ê° ì„œë²„ì— ê· ë“±í•˜ê²Œ ë°ì´í„°ë¥¼ ë‚˜ëˆ„ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•.</p>

<h3 id="í•´ì‹±hashingì´ë€-ë¬´ì—‡ì¸ê°€">í•´ì‹±(Hashing)ì´ë€ ë¬´ì—‡ì¸ê°€?</h3>

<p>í•´ì‹±ì´ë€ ë‹¤ì–‘í•œ ê¸¸ì´ì˜ ì…ë ¥ê°’ë“¤ì— ëŒ€í•´ì„œ ê³ ì •ëœ ê¸¸ì´ì˜ ì¶œë ¥ê°’ì„ ìƒì„±í•´ì£¼ëŠ” ê³¼ì •ì„ ëœ»í•œë‹¤. ì´ ì¶œë ¥ê°’ì„ ìš°ë¦¬ëŠ” í•´ì‹œê°’(hash value)ë¼ê³  ë¶€ë¥¸ë‹¤. ê·¸ë¦¬ê³  ì´ ê³¼ì •ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì§„í–‰í•˜ëŠ” ê³¼ì •ì— ì“°ì´ëŠ” ê²ƒì„ í•´ì‹œ í•¨ìˆ˜(hash function)ì´ë¼ê³  í•œë‹¤.</p>

<h2 id="ì›ì¸">ì›ì¸</h2>

<hr />

<h3 id="í•´ì‹œ-í‚¤-ì¬ë°°ì¹˜refresh-ë¬¸ì œ">í•´ì‹œ í‚¤ ì¬ë°°ì¹˜(refresh) ë¬¸ì œ</h3>

<ul>
  <li>ì´ 4ê°œì˜ ì„œë²„</li>
</ul>

<table>
  <thead>
    <tr>
      <th>í‚¤</th>
      <th>í•´ì‹œ</th>
      <th>ì„œë²„</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key0</td>
      <td>18358617</td>
      <td>1</td>
    </tr>
    <tr>
      <td>key1</td>
      <td>26143584</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key2</td>
      <td>18131146</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key3</td>
      <td>34085809</td>
      <td>1</td>
    </tr>
    <tr>
      <td>key4</td>
      <td>35863496</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key5</td>
      <td>27581703</td>
      <td>3</td>
    </tr>
    <tr>
      <td>key6</td>
      <td>38164978</td>
      <td>2</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ì´ 3ê°œì˜ ì„œë²„(1ê°œ ì„œë²„ ë‹¤ìš´)</li>
</ul>

<table>
  <thead>
    <tr>
      <th>í‚¤</th>
      <th>í•´ì‹œ</th>
      <th>ì„œë²„</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key0</td>
      <td>18358617</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key1</td>
      <td>26143584</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key2</td>
      <td>18131146</td>
      <td>1</td>
    </tr>
    <tr>
      <td>key3</td>
      <td>34085809</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key4</td>
      <td>35863496</td>
      <td>1</td>
    </tr>
    <tr>
      <td>key5</td>
      <td>27581703</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key6</td>
      <td>38164978</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ìœ„ ì˜ˆì œì²˜ëŸ¼ í•´ì‹œ ê°’ì„ ì„œë²„ì˜ ê°œìˆ˜ë¡œ ëª¨ë“ˆëŸ¬ ì—°ì‚°ì„ ì§„í–‰í•˜ëŠ” í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ í‚¤ê°€ ì €ì¥ëœ ì„œë²„ì˜ ìœ„ì¹˜ë¥¼ íŠ¹ì • ì§“ëŠ”ë‹¤ê³  ê°€ì •í•´ë³´ì.</li>
  <li>ê·¸ëŸ¬ë©´ 1ê°œì˜ ì„œë²„ê°€ ë‹¤ìš´ë  ê²½ìš° ëª¨ë“ˆëŸ¬ ì—°ì‚°ì„ í•˜ëŠ” ê¸°ì¤€ì´ 4ê°œì—ì„œ 3ê°œë¡œ ë³€ê²½ë˜ë©´ì„œ ê° í‚¤ì— í•´ë‹¹í•˜ëŠ” ì„œë²„ IndexëŠ” ëª¨ë‘ ê¼¬ì´ê²Œ ëœë‹¤.</li>
  <li>ê²°ë¡ ì€ ëŒ€ê·œëª¨ cache missê°€ ë°œìƒí•˜ê²Œ ë˜ê³  íŠ¹ì • ì„œë²„ì— ëª°ë¦¬ê²Œ ë˜ë©´ ê³¼ë¶€í•˜ê°€ ê±¸ë¦¬ë©° ì„œë¹„ìŠ¤ëŠ” í˜¼ëˆì— ë¹ ì§ˆ ê²ƒì´ë‹¤..</li>
</ul>

<h2 id="í•´ê²°-ë°©ì•ˆ">í•´ê²° ë°©ì•ˆ</h2>

<hr />

<h3 id="ì•ˆì •-í•´ì‹œconsistent-hash"><strong>ì•ˆì • í•´ì‹œ(Consistent Hash)</strong></h3>

<aside>
ğŸ’¡ Wikipediaì—ì„œëŠ” ì¼ê´€ëœ í•´ì‹±ì´ë¼ëŠ” ëª…ì¹­ì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©°, ì›¹ ì„œë²„ì˜ ê°œìˆ˜ê°€ ë³€ë™í•˜ëŠ” ê°€ìš´ë° ìš”ì²­ì„ ë¶„ì‚°í•˜ëŠ” ë°©ë²•ì´ë‹¤.
íŠ¹ì§•ì€ ëª¨ë“  í‚¤ë¥¼ ì¬ë°°ì¹˜ í•´ì•¼í•˜ëŠ” ì¼ë°˜ì ì¸ í•´ì‹œ ê¸°ìˆ ê³¼ëŠ” ë‹¤ë¥´ê²Œ K/n(K : key, n: Server)ë§Œ ì¬ë°°ì¹˜ í•˜ë©´ ëœë‹¤.

</aside>

<ul>
  <li>ì‘ë™ ê³¼ì •
    <ol>
      <li>í•´ì‹œ í•¨ìˆ˜ì˜ ê²°ê³¼ê°’ì— ëŒ€í•œ ì €ì¥ ê³µê°„ ë²”ìœ„ë¥¼ ì •í•œë‹¤. ì´ë¥¼ í•´ì‹œ ê³µê°„(hash space)ë¼ ë¶€ë¥¸ë‹¤.</li>
      <li>ì´ ê³µê°„ì„ í•´ì‹œ ë§ìœ¼ë¡œ ë§Œë“ ë‹¤.</li>
      <li>ëª¨ë“  ì„œë²„ë“¤ì„ í•´ì‹±í•˜ê³  ë™ì¼í•˜ê²Œ í•´ì‹œ ë§ì— ë§¤í•‘ ì‹œí‚¨ë‹¤.</li>
      <li>ëª¨ë“  í‚¤ë“¤ë„ 3ë²ˆê³¼ ë™ì¼í•˜ê²Œ ì‘ì—…í•œë‹¤.</li>
      <li>í‚¤ë“¤ì€ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ì„œë²„ë¥¼ íƒìƒ‰í•œë‹¤.</li>
    </ol>
  </li>
</ul>

<h3 id="hash-ring">Hash ring</h3>

<p><img src="/assets/img/pjt/hashring1.png" alt="hashring1" /></p>

<p>íšŒìƒ‰ ê¸€ì”¨ë¡œ ì“°ì¸ ì ë“¤ì„ Serverê°€ ë§¤í•‘ëœ ê³³, íŒŒë€ìƒ‰ ê¸€ì”¨ë¡œ ì“°ì¸ ì ë“¤ì„ keyê°’ì´ë¼ê³  ê°€ì •í–ˆì„ ë•Œ,</p>

<table>
  <thead>
    <tr>
      <th>í‚¤</th>
      <th>í•´ì‹œ</th>
      <th>ì„œë²„</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key-0</td>
      <td>15000</td>
      <td>1</td>
    </tr>
    <tr>
      <td>key-1</td>
      <td>25678</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key-2</td>
      <td>29536</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key-3</td>
      <td>33357</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key-4</td>
      <td>36458</td>
      <td>3</td>
    </tr>
    <tr>
      <td>key-5</td>
      <td>39600</td>
      <td>3</td>
    </tr>
    <tr>
      <td>key-6</td>
      <td>58765</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<p>ìœ„ í‘œì™€ ê°™ì´ ì„œë²„ì— key ê°’ì´ ë¶„ë°°ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/img/pjt/hashring2.png" alt="hashring2" /></p>

<ul>
  <li>ìœ„ ê·¸ë¦¼ê³¼ ì°¨ì´ì ì€ S3 ì„œë²„ê°€ ë‹¤ìš´ë˜ì–´ ì—†ì–´ì¡Œë‹¤ëŠ” ì ì´ë‹¤.</li>
  <li>hash ringì„ ì‚¬ìš©í•œ ì•ˆì • í•´ì‹œì—ì„œëŠ” S2ë¶€í„° S0ê¹Œì§€ì˜ í‚¤ ê°’ë“¤ë§Œ ì¬ë°°ì¹˜ë¥¼ í•˜ë©´ ëœë‹¤.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>í‚¤</th>
      <th>í•´ì‹œ</th>
      <th>ì„œë²„</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key-0</td>
      <td>15000</td>
      <td>1</td>
    </tr>
    <tr>
      <td>key-1</td>
      <td>25678</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key-2</td>
      <td>29536</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key-3</td>
      <td>33357</td>
      <td>2</td>
    </tr>
    <tr>
      <td>key-4</td>
      <td>36458</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key-5</td>
      <td>39600</td>
      <td>0</td>
    </tr>
    <tr>
      <td>key-6</td>
      <td>58765</td>
      <td>0</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>key-4ì™€ key-5ë§Œ ì¬ë°°ì¹˜ê°€ ì™„ë£Œë˜ì ì •ìƒì ìœ¼ë¡œ ë°°ì •ì´ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<h2 id="ì•ˆì •-í•´ì‹œ-ë¬¸ì œì ê³¼-í•´ê²°-ë°©ì•ˆ">ì•ˆì • í•´ì‹œ ë¬¸ì œì ê³¼ í•´ê²° ë°©ì•ˆ</h2>

<h3 id="ë¬¸ì œì ">ë¬¸ì œì </h3>

<ol>
  <li>íŒŒí‹°ì…˜ í¬ê¸°ì˜ ê· ë“± ìœ ì§€
    <ul>
      <li>ì„œë²„ê°€ ì‚­ì œë˜ê±°ë‚˜ ì¶”ê°€ëì„ ë•Œ í‚¤ì˜ ì¬ë¶„ë°°ë¥¼ ë¹ ë¥´ê²Œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ í•´ì‹œ ë§ ë‚´ì—ì„œ ê° ì„œë²„ì— í• ë‹¹ë˜ëŠ” í•´ì‹œ ê³µê°„ì˜ í¬ê¸°ê°€ ì¼ì •í•˜ì§€ ì•Šë‹¤ëŠ” ë¬¸ì œì ì´ ë°œìƒí•œë‹¤.</li>
      <li>ê·¸ë¦¼ì„ ì°¸ê³ í•˜ë©´ S3 ì„œë²„ê°€ ì‚­ì œë˜ë©´ì„œ S2ì™€ S0 ì„œë²„ ì‚¬ì´ì˜ í•´ì‹œ ê³µê°„ì˜ ë²”ìœ„ê°€ ëŠ˜ì–´ë‚œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
  <li>ê· ë“± ë¶„í¬ì˜ ë¬¸ì œì 
    <ul>
      <li>ìœ„ ê·¸ë¦¼ ì˜ˆì‹œì²˜ëŸ¼ í•˜ë‚˜ì˜ ì„œë²„ì— ë§ì€ í‚¤ê°’ì´ ì €ì¥ë  ìˆ˜ ìˆëŠ” ê²ƒì— ë”í•´ì„œ íŠ¹ì • ì„œë²„ì—ëŠ” ì–´ë– í•œ í‚¤ê°’ë„ ì €ì¥ë˜ì§€ ì•ŠëŠ” ë¬¸ì œì ì´ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.</li>
    </ul>
  </li>
</ol>

<h3 id="í•´ê²°-ë°©ì•ˆ-1">í•´ê²° ë°©ì•ˆ</h3>

<ul>
  <li>ê°€ìƒ ë…¸ë“œ(virtual node)ì˜ í™œìš©
    <ul>
      <li>ê°€ìƒ ë…¸ë“œë¥¼ ê° ì„œë²„ë§ˆë‹¤ nê°œ ìƒì„±í•´ì„œ ê° ì„œë²„ë¥¼ ê°€ë¥´í‚¤ë„ë¡ ì„¤ì •í•˜ê³  í•´ì‹œ ë§ ë‚´ì— ë§¤í•‘ ì‹œí‚¨ë‹¤.</li>
      <li>í‚¤ ê°’ë“¤ì€ ì‹œê³„ ë°©í–¥ íƒìƒ‰ì„ ì§„í–‰í•˜ë©° ê°€ìƒ ë…¸ë“œë¥¼ ë§ˆì£¼ì¹  ê²½ìš° í•´ë‹¹ ì„œë²„ì— í‚¤ ê°’ì„ ì €ì¥ì‹œí‚¨ë‹¤.</li>
    </ul>
  </li>
  <li>íŠ¹ì§•
    <ul>
      <li>ê°€ìƒ ë…¸ë“œì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ í‚¤ì˜ ë¶„í¬ëŠ” ë”ìš± ê· ë“±í•´ì§„ë‹¤.</li>
      <li>í•˜ì§€ë§Œ, ê°€ìƒ ë…¸ë“œì˜ ê°œìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ í•´ë‹¹ ê°€ìƒ ë…¸ë“œì˜ ë°ì´í„°ë¥¼ ì €ì¥í•  ê³µê°„ ë˜í•œ í•„ìš”í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ìª½ íš¨ìœ¨ì€ ë–¨ì–´ì§ˆ ìˆ˜ ë°–ì— ì—†ìŒì— ì£¼ì˜í•˜ì.</li>
    </ul>
  </li>
</ul>

<h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h2>

<p>ì•ˆì • í•´ì‹œê°€ í•„ìš”í•œ ì´ìœ ëŠ” í•«ìŠ¤íŒŸ(hotspot) í‚¤ ë¬¸ì œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ë‚´ íŠ¹ì • ìƒ¤ë“œì— ì ‘ê·¼ì´ ì§€ë‚˜ì¹˜ê²Œ ë§ì´ ì´ë£¨ì–´ì§„ë‹¤ë©´ ê³¼ë¶€í•˜ê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¬¸ì œì ì„ í•´ê²°í•˜ëŠ”ë° íƒì›”í•˜ë‹¤.</p>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="pjt" /><summary type="html"><![CDATA["ì•ˆì • í•´ì‹± ë“±ì¥ ë°°ê²½"]]></summary></entry><entry><title type="html">[Spring Security] Security ê¸°ë³¸ ì„¤ì •</title><link href="http://localhost:4000/categories/pjt/2024-02-18-pjt-security_1/" rel="alternate" type="text/html" title="[Spring Security] Security ê¸°ë³¸ ì„¤ì •" /><published>2024-02-18T00:00:00+09:00</published><updated>2024-03-11T17:55:41+09:00</updated><id>http://localhost:4000/categories/pjt/pjt-security_1</id><content type="html" xml:base="http://localhost:4000/categories/pjt/2024-02-18-pjt-security_1/"><![CDATA[<ul id="markdown-toc">
  <li><a href="#setting" id="markdown-toc-setting">Setting</a></li>
  <li><a href="#spring-security" id="markdown-toc-spring-security">Spring Security</a>    <ul>
      <li><a href="#ì™œ-ì‚¬ìš©í•´ì•¼-í•˜ëŠ”ê°€" id="markdown-toc-ì™œ-ì‚¬ìš©í•´ì•¼-í•˜ëŠ”ê°€">ì™œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?</a></li>
      <li><a href="#security-architecture" id="markdown-toc-security-architecture">Security Architecture</a>        <ul>
          <li><a href="#ì–´ë–»ê²Œ-ë™ì‘í•˜ëŠ”ê°€" id="markdown-toc-ì–´ë–»ê²Œ-ë™ì‘í•˜ëŠ”ê°€">ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€?</a></li>
        </ul>
      </li>
      <li><a href="#security-filter-chain" id="markdown-toc-security-filter-chain">Security Filter Chain</a>        <ul>
          <li><a href="#filter-chain-ë‚´ë¶€-ëª¨ìŠµ" id="markdown-toc-filter-chain-ë‚´ë¶€-ëª¨ìŠµ">Filter Chain ë‚´ë¶€ ëª¨ìŠµ</a></li>
          <li><a href="#security-config" id="markdown-toc-security-config">Security Config</a></li>
          <li><a href="#authentication-manager" id="markdown-toc-authentication-manager">Authentication Manager</a></li>
          <li><a href="#ì¶œì²˜" id="markdown-toc-ì¶œì²˜">ì¶œì²˜</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h2 id="setting">Setting</h2>
<p>Spring Boot 3.2.1 <br />
Spring Security 6.2.1 <br />
jjwt 0.12.4</p>

<h1 id="spring-security">Spring Security</h1>
<h2 id="ì™œ-ì‚¬ìš©í•´ì•¼-í•˜ëŠ”ê°€">ì™œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?</h2>
<ul>
  <li>Spring SecurityëŠ” ìì²´ì ìœ¼ë¡œ ì¸ì¦/ì¸ê°€ ë¡œì§ì„ ë„ì™€ì£¼ê³  ì™¸ë¶€ ê³µê²©ì„ ë°©ì–´í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.</li>
</ul>

<blockquote>
  <p>í˜„ì¬ Spring SecurityëŠ” 7ë²„ì „ì„ ì¤€ë¹„í•˜ë©´ì„œ Lambda DSLì„ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë°”ë€Œì—ˆë‹¤. <br />
Deprecated ë˜ì–´ìˆëŠ” Methodë“¤ì´ ìƒë‹¹íˆ ë§ê¸° ë•Œë¬¸ì— ì°¾ì•„ë³´ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.</p>
</blockquote>

<h2 id="security-architecture">Security Architecture</h2>
<h3 id="ì–´ë–»ê²Œ-ë™ì‘í•˜ëŠ”ê°€">ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€?</h3>
<ul>
  <li>Spring SecurityëŠ” Servlet ë‚´ FilterChainì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ ë™ì‘í•œë‹¤.</li>
  <li>ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ SecurityëŠ” Servlet Containerì—ì„œ Spring Containerì— ì ‘ê·¼í•´ì„œ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ê¹Œ?</li>
</ul>

<p><img src="/assets/img/pjt/filter_chain.png" alt="filter chain" /></p>

<ul>
  <li>DelegatingFilterProxyì—ì„œëŠ” ì˜ˆì™¸ì ìœ¼ë¡œ Spring containerì— Servlet Containerê°€ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.</li>
  <li>í•´ë‹¹ DelegatingFilterProxyì— FilterChainProxyëŠ” Spring Container ë‚´ì˜ SecurityFilterChain ì´ë¦„ìœ¼ë¡œ ë“±ë¡ëœ Beanì„ ì°¾ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê²ƒì´ë‹¤.</li>
</ul>

<h2 id="security-filter-chain">Security Filter Chain</h2>
<h3 id="filter-chain-ë‚´ë¶€-ëª¨ìŠµ">Filter Chain ë‚´ë¶€ ëª¨ìŠµ</h3>
<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">2023-06-14T08:55:22.321-03:00  INFO 76975 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [
org.springframework.security.web.session.DisableEncodeUrlFilter@404db674,
org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50f097b5,
org.springframework.security.web.context.SecurityContextHolderFilter@6fc6deb7,
org.springframework.security.web.header.HeaderWriterFilter@6f76c2cc,
org.springframework.security.web.csrf.CsrfFilter@c29fe36,
org.springframework.security.web.authentication.logout.LogoutFilter@ef60710,
org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7c2dfa2,
org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4397a639,
org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7add838c,
org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5cc9d3d0,
org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da39774,
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@32b0876c,
org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3662bdff,
org.springframework.security.web.access.ExceptionTranslationFilter@77681ce4,
org.springframework.security.web.access.intercept.AuthorizationFilter@169268a7]
</span></code></pre></div></div>

<ul>
  <li>Security Filter Chainì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ Info levelì—ì„œ í™•ì¸í–ˆì„ ë•Œì˜ êµ¬ì¡°ì´ë‹¤.</li>
  <li>ìˆœì„œë¥¼ ì•Œê³ ìˆì„ í•„ìš”ëŠ” ì—†ë‹¤ê³  ì–˜ê¸°í•˜ì§€ë§Œ Custom Filterë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ëŠì •ë„ ì•Œì•„ë‘ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.</li>
</ul>

<h3 id="security-config">Security Config</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Configuration</span>
    <span class="nd">@EnableWebSecurity</span>
    <span class="nd">@RequiredArgsConstructor</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JwtAuthenticationFilter</span> <span class="n">jwtAuthenticationFilter</span><span class="o">;</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">securityFilterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
            <span class="n">http</span>
                    <span class="o">.</span><span class="na">cors</span><span class="o">(</span><span class="n">cors</span> <span class="o">-&gt;</span> <span class="n">cors</span><span class="o">.</span><span class="na">configurationSource</span><span class="o">(</span><span class="n">configurationSource</span><span class="o">()))</span>
                    <span class="o">.</span><span class="na">csrf</span><span class="o">(</span><span class="nl">AbstractHttpConfigurer:</span><span class="o">:</span><span class="n">disable</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">authorizeHttpRequests</span><span class="o">(</span><span class="n">authorize</span> <span class="o">-&gt;</span> <span class="n">authorize</span>
                            <span class="o">.</span><span class="na">dispatcherTypeMatchers</span><span class="o">(</span><span class="no">FORWARD</span><span class="o">,</span> <span class="no">ERROR</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">requestMatchers</span><span class="o">(</span><span class="s">"/member/login"</span><span class="o">,</span> <span class="s">"/member/signup"</span><span class="o">,</span> <span class="s">"/member/idcheck/**"</span><span class="o">,</span>
                                    <span class="s">"/article/list/**"</span><span class="o">,</span> <span class="s">"/article/detail/**"</span><span class="o">,</span> <span class="s">"comment/list/**"</span><span class="o">,</span> <span class="s">"/article/size"</span><span class="o">,</span>
                                    <span class="s">"/file/detail/**"</span><span class="o">,</span>
                                    <span class="o">(</span><span class="s">"/auth/silent-refresh"</span><span class="o">))</span>
                            <span class="o">.</span><span class="na">permitAll</span><span class="o">()</span>
                            <span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
                    <span class="o">)</span>
                    <span class="o">.</span><span class="na">addFilterBefore</span><span class="o">(</span><span class="n">jwtAuthenticationFilter</span><span class="o">,</span> <span class="nc">UsernamePasswordAuthenticationFilter</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="nc">CorsConfigurationSource</span> <span class="nf">configurationSource</span><span class="o">()</span> <span class="o">{</span>
            <span class="nc">CorsConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CorsConfiguration</span><span class="o">();</span>
            <span class="n">config</span><span class="o">.</span><span class="na">setAllowedOrigins</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"https://i10a608.p.ssafy.io"</span><span class="o">));</span>
            <span class="n">config</span><span class="o">.</span><span class="na">setAllowedMethods</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"GET"</span><span class="o">,</span> <span class="s">"PUT"</span><span class="o">,</span> <span class="s">"POST"</span><span class="o">,</span> <span class="s">"DELETE"</span><span class="o">,</span> <span class="s">"OPTIONS"</span><span class="o">,</span> <span class="s">"PATCH"</span><span class="o">));</span>
            <span class="n">config</span><span class="o">.</span><span class="na">setAllowCredentials</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="n">config</span><span class="o">.</span><span class="na">setAllowedHeaders</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="s">"content-type"</span><span class="o">,</span> <span class="s">"x-requested-with"</span><span class="o">));</span>
            <span class="n">config</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="mi">1800L</span><span class="o">);</span>

            <span class="nc">UrlBasedCorsConfigurationSource</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UrlBasedCorsConfigurationSource</span><span class="o">();</span>
            <span class="n">source</span><span class="o">.</span><span class="na">registerCorsConfiguration</span><span class="o">(</span><span class="s">"/**"</span><span class="o">,</span> <span class="n">config</span><span class="o">);</span>

            <span class="k">return</span> <span class="n">source</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="nc">PasswordEncoder</span> <span class="nf">passwordEncoder</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">BCryptPasswordEncoder</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>í•´ë‹¹ ì½”ë“œëŠ” ì§„í–‰í–ˆë˜ í”„ë¡œì íŠ¸ì˜ Security Config ì„¤ì •ì´ë‹¤.</li>
  <li>SecurityFilterChain ë¶€ë¶„ ì½”ë“œë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ì´ Cors(Cross Origin Resource Sharing) ì„¤ì •ê³¼ CSRF(Cross Site Request Forgery) ì„¤ì •ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<h3 id="authentication-manager">Authentication Manager</h3>
<p><img src="/assets/img/pjt/SecurityManager.PNG" alt="Authentication Flow" /></p>
<ul>
  <li>Security Filter Chain ë‚´ë¶€ ì¸ì¦ì€ Authentication Managerê°€ ë§¡ì•„ì„œ ì²˜ë¦¬í•œë‹¤.</li>
  <li>Authentication ManagerëŠ” ì¸ì¦ì„ ìœ„í•œ Authentication Providerë¥¼ ìë™ìœ¼ë¡œ ë§¤í•‘ì‹œì¼œì£¼ë©° providerëŠ” ì¸ì¦ì— ì„±ê³µí•  ì‹œ ì„±ê³µ ì •ë³´ë¥¼ ë°˜í™˜í•´ Security Contextì— ë„£ì–´ì¤€ë‹¤.</li>
  <li>
    <p>ì´í›„ ì¸ì¦ ê³¼ì •ì—ì„œ Security Contextë§Œì„ í™•ì¸í•˜ë©´ ì¸ì¦ì´ ì™„ë£Œëœ ìš”ì²­ì´ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¸ì¦ì„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>
  </li>
  <li>
    <p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì§§ê²Œ í”„ë¡œì íŠ¸ ì§„í–‰ ê°„ CORSì™€ CSRF ì„¤ì •ì—ì„œ ìˆì—ˆë˜ ì¼ì„ ì •ë¦¬</p>
  </li>
  <li>CORS
    <ul>
      <li>í”„ë¡œí† ì½œì´ ë‹¤ë¥´ê±°ë‚˜(http, https), ë„ë©”ì¸ì´ ë‹¤ë¥´ê±°ë‚˜, í¬íŠ¸ ë²ˆí˜¸ê°€ ë‹¤ë¥´ë‹¤ë©´ ì ‘ê·¼ì„ ë§‰ì•„ë²„ë¦°ë‹¤.</li>
      <li>Credentials ë¶€ë¶„, ë§Œì•½ falseë¡œ ë˜ì–´ìˆë‹¤ë©´ ë‚´ê°€ ì¸ì¦ í† í°ì„ ì›í•´ë„ requestì— ì£¼ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” ë¡œê·¸ì¸ ìœ ì§€ê°€ ì•ˆë˜ëŠ” ì¹˜ëª…ì  ê²°í•¨ìœ¼ë¡œ ì´ì–´ì§€ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ trueë¡œ ì„¤ì •í•´ì£¼ì–´ì•¼í•œë‹¤.</li>
      <li>ë§Œì•½ Headerì— Authorizationì— í† í° ê°’ì„ ë‚´ë ¤ë³´ë‚¸ë‹¤ë©´ í•´ë‹¹ ë¶€ë¶„ë„ ì¶”ê°€ë¥¼ í•´ì¤˜ì•¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
    </ul>
  </li>
  <li>CSRF
    <ul>
      <li>í† í°ìœ¼ë¡œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì— ê³µìœ ë˜ëŠ” ì¸ì¦ê°’ì´ë‹¤.</li>
      <li>Rest Api ì„œë²„ì˜ ê²½ìš° statelessí•˜ë‹¤. ì¦‰, ì„œë²„ì— í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœë¥¼ ì €ì¥í•´ë†“ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” CSRF í† í°ì„ ì´ìš©í•´ì„œ ì„¸ì…˜ ì¸ì¦ì„ í™•ì¸í•  í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.</li>
      <li>api ì„œë²„ëŠ” jwt í˜¹ì€ authë¥¼ ì´ìš©í•´ ë°›ê¸° ë•Œë¬¸ì— csrfë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë³´ì•ˆ ìƒì˜ ì´ì ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>ğŸ’¡ ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ë¸Œë¼ìš°ì €ì—ì„œ ì„œë²„ì— ë°”ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì‘ë‹µì„ ë°›ê¸° ë•Œë¬¸ì— ë™ì¼ ì¶œì²˜ê°€ ë˜ëŠ”ê±°ê³  ë‚´ê°€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ê±°ì³ì„œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ëŠ” ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ ì„œë²„ë¥¼ ê±°ì¹˜ëŠ” ê³¼ì •ì´ ìƒê¸°ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì € ë”´ì—ì„œëŠ” cors ì •ì±… ìœ„ë°˜ì„ í•œë‹¤ê³  ìƒê°í•˜ëŠ”ê±°ì•¼? <br />
ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°, ë¸Œë¼ìš°ì €ëŠ” ì´ë¥¼ â€œsame-originâ€ ìš”ì²­ìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤. ì´ëŠ” ë¸Œë¼ìš°ì €ê°€ ìš”ì²­ì„ ë³´ë‚´ëŠ” ì¶œì²˜ì™€ ìš”ì²­ì´ ë³´ë‚´ì§€ëŠ” ëŒ€ìƒì´ ë™ì¼í•˜ë‹¤ê³  íŒë‹¨í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ê²½ìš°ì—ëŠ” CORS ì •ì±…ì´ ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. <br />
ê·¸ëŸ¬ë‚˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°, ë¸Œë¼ìš°ì €ëŠ” ì´ë¥¼ â€œcross-originâ€ ìš”ì²­ìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤. ì´ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜(í´ë¼ì´ì–¸íŠ¸)ì˜ ì¶œì²˜ì™€ ìš”ì²­ì´ ë³´ë‚´ì§€ëŠ” ëŒ€ìƒ(ì„œë²„)ì´ ë‹¤ë¥´ë‹¤ê³  íŒë‹¨í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ê²½ìš°ì—ëŠ” CORS ì •ì±…ì´ ì ìš©ë˜ë©°, ì„œë²„ëŠ” CORS í—¤ë”ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ê²Œ í•´ë‹¹ ë„ë©”ì¸ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì•¼ í•©ë‹ˆë‹¤. <br />
ë”°ë¼ì„œ, í´ë¼ì´ì–¸íŠ¸ë¥¼ ê±°ì³ì„œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì—ëŠ” CORS ì„¤ì •ì´ í•„ìš”í•˜ë©°, ì´ ì„¤ì •ì€ ì„œë²„ ì¸¡ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë²„ëŠ” íŠ¹ì • ë„ë©”ì¸ì˜ í´ë¼ì´ì–¸íŠ¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>

<h3 id="ì¶œì²˜">ì¶œì²˜</h3>
<p><a href="https://docs.spring.io/spring-security/reference/">Spring Security</a></p>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="pjt" /><summary type="html"><![CDATA["Spring Security ê¸°ë³¸ êµ¬ì¡° ì´í•´"]]></summary></entry><entry><title type="html">[Spring Security] JWT</title><link href="http://localhost:4000/categories/pjt/2024-02-18-pjt-security_2/" rel="alternate" type="text/html" title="[Spring Security] JWT" /><published>2024-02-18T00:00:00+09:00</published><updated>2024-06-27T16:20:31+09:00</updated><id>http://localhost:4000/categories/pjt/pjt-security_2</id><content type="html" xml:base="http://localhost:4000/categories/pjt/2024-02-18-pjt-security_2/"><![CDATA[<ul id="markdown-toc">
  <li><a href="#setting" id="markdown-toc-setting">Setting</a></li>
  <li><a href="#jwtjson-web-tokens" id="markdown-toc-jwtjson-web-tokens">JWT(Json Web Tokens)</a>    <ul>
      <li><a href="#jwt-ìƒì„±--ê²€ì¦" id="markdown-toc-jwt-ìƒì„±--ê²€ì¦">JWT ìƒì„± &amp; ê²€ì¦</a>        <ul>
          <li><a href="#ì•Œê³ ë¦¬ì¦˜" id="markdown-toc-ì•Œê³ ë¦¬ì¦˜">ì•Œê³ ë¦¬ì¦˜</a></li>
          <li><a href="#jwt-êµ¬ì¡°" id="markdown-toc-jwt-êµ¬ì¡°">JWT êµ¬ì¡°</a></li>
          <li><a href="#jwt-ìƒì„±" id="markdown-toc-jwt-ìƒì„±">JWT ìƒì„±</a></li>
          <li><a href="#jwt-ê²€ì¦" id="markdown-toc-jwt-ê²€ì¦">JWT ê²€ì¦</a></li>
        </ul>
      </li>
      <li><a href="#jwt-ì´ìš©í•œ-ì¸ì¦" id="markdown-toc-jwt-ì´ìš©í•œ-ì¸ì¦">JWT ì´ìš©í•œ ì¸ì¦</a>        <ul>
          <li><a href="#êµ¬í˜„-ì½”ë“œ" id="markdown-toc-êµ¬í˜„-ì½”ë“œ">êµ¬í˜„ ì½”ë“œ</a></li>
          <li><a href="#ê°œë°œ-ê³¼ì •-ì¸ì¦-ì ˆì°¨" id="markdown-toc-ê°œë°œ-ê³¼ì •-ì¸ì¦-ì ˆì°¨">ê°œë°œ ê³¼ì • ì¸ì¦ ì ˆì°¨</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h2 id="setting">Setting</h2>
<p>Spring Boot 3.2.1 <br />
Spring Security 6.2.1 <br />
jjwt 0.12.4</p>

<h1 id="jwtjson-web-tokens">JWT(Json Web Tokens)</h1>
<h2 id="jwt-ìƒì„±--ê²€ì¦">JWT ìƒì„± &amp; ê²€ì¦</h2>
<h3 id="ì•Œê³ ë¦¬ì¦˜">ì•Œê³ ë¦¬ì¦˜</h3>
<ul>
  <li>signatureì— ë“¤ì–´ê°ˆ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ê°€ì¥ ë²”ìš©ì ì¸ HMAC512 ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©</li>
  <li>ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ë„ ì¡´ì¬í•˜ì§€ë§Œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì— ìœ íš¨í•˜ê³  ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ HMAC ì•Œê³ ë¦¬ì¦˜</li>
  <li>256ê³¼ 512ì˜ ì°¨ì´ëŠ” 512ê°€ ë” ë¹ ë¥¸ íŠ¹ì§•ì´ ìˆì§€ë§Œ CPU 32bit ì´í•˜ì˜ ì„±ëŠ¥ì—ì„œëŠ” 256ì´ ê¶Œì¥ëœë‹¤ê³  í•œë‹¤.</li>
</ul>

<h3 id="jwt-êµ¬ì¡°">JWT êµ¬ì¡°</h3>
<ul>
  <li>í† í°ì€ header, payload, signatureë¡œ ì´ë£¨ì–´ì§„ë‹¤.
    <ul>
      <li>headerì—ëŠ” ê¸°ë³¸ì •ë³´ë¥¼ ì €ì¥</li>
      <li>payloadì—ëŠ” issuer, userno, issuedate ë“± í•„ìš”í•œ ì •ë³´ë“¤ì„ ì €ì¥</li>
      <li>signatureì—ëŠ” ì„ íƒí•œ ì•Œê³ ë¦¬ì¦˜ê³¼ payloadë“± ë¶€ë¶„ë“¤ì„ ì´ìš© Secret Keyê°’ê³¼ í•¨ê»˜ ì•”í˜¸í™”í•´ì„œ ê²€ì¦í•  ìˆ˜ ìˆëŠ” ê²€ì¦ ë°ì´í„°ê°€ ë“¤ì–´ê°„ë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="jwt-ìƒì„±">JWT ìƒì„±</h3>
<ul>
  <li>ì„¸ë¶€ ì„¤ì •ì„ ìˆ¨ê¸°ê¸° ìœ„í•´ yml íŒŒì¼ì„ ì´ìš©í•´ JWTì— ë“¤ì–´ê°ˆ ê°’ë“¤ì„ ì €ì¥í•´ì¤€ë‹¤.
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">app</span><span class="pi">:</span>
<span class="na">JWT_COOKIE_A</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ACCESS"</span>
<span class="na">JWT_COOKIE_R</span><span class="pi">:</span> <span class="s2">"</span><span class="s">REFRESH"</span>
<span class="na">JWT_KEY </span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="na">JWT_REFRESH_EXPIRATION </span><span class="pi">:</span> <span class="s2">"</span><span class="s">604800000"</span>
<span class="na">JWT_ACCESS_EXPIRATION </span><span class="pi">:</span> <span class="s2">"</span><span class="s">1800000"</span>
</code></pre></div>    </div>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// ì‹¤ì œ JWT ìƒì„± ì½”ë“œ</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="nf">createAccessToken</span><span class="o">(</span><span class="kt">int</span> <span class="n">memberNo</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">();</span>
        <span class="nc">SecretKey</span> <span class="n">key</span> <span class="o">=</span> <span class="nc">Keys</span><span class="o">.</span><span class="na">hmacShaKeyFor</span><span class="o">(</span><span class="no">JWT_KEY</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="k">return</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">issuer</span><span class="o">(</span><span class="s">"GoldZZok"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">claim</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">memberNo</span><span class="o">)</span>
                <span class="o">.</span><span class="na">issuedAt</span><span class="o">(</span><span class="n">date</span><span class="o">)</span>
                <span class="o">.</span><span class="na">expiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">+</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="no">JWT_ACCESS_EXPIRE</span><span class="o">)))</span>  <span class="c1">// 30ë¶„ ì„¤ì •</span>
                <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="n">key</span><span class="o">).</span><span class="na">compact</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="nf">createRefreshToken</span><span class="o">(</span><span class="kt">int</span> <span class="n">memberNo</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">();</span>
        <span class="nc">SecretKey</span> <span class="n">key</span> <span class="o">=</span> <span class="nc">Keys</span><span class="o">.</span><span class="na">hmacShaKeyFor</span><span class="o">(</span><span class="no">JWT_KEY</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="k">return</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">issuer</span><span class="o">(</span><span class="s">"GoldZZok"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">claim</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">memberNo</span><span class="o">)</span>
                <span class="o">.</span><span class="na">issuedAt</span><span class="o">(</span><span class="n">date</span><span class="o">)</span>
                <span class="o">.</span><span class="na">expiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">+</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="no">JWT_REFRESH_EXPIRE</span><span class="o">)))</span>  <span class="c1">// 7ì¼ ì„¤ì •</span>
                <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="n">key</span><span class="o">).</span><span class="na">compact</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></div></div>

<h3 id="jwt-ê²€ì¦">JWT ê²€ì¦</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">validateToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SecretKey</span> <span class="n">key</span> <span class="o">=</span> <span class="nc">Keys</span><span class="o">.</span><span class="na">hmacShaKeyFor</span><span class="o">(</span><span class="no">JWT_KEY</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Jws</span><span class="o">&lt;</span><span class="nc">Claims</span><span class="o">&gt;</span> <span class="n">claims</span> <span class="o">=</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">parser</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">verifyWith</span><span class="o">(</span><span class="n">key</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">parseSignedClaims</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>

            <span class="k">return</span> <span class="o">!</span><span class="n">claims</span><span class="o">.</span><span class="na">getPayload</span><span class="o">().</span><span class="na">getExpiration</span><span class="o">().</span><span class="na">before</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">JwtException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<h2 id="jwt-ì´ìš©í•œ-ì¸ì¦">JWT ì´ìš©í•œ ì¸ì¦</h2>
<h3 id="êµ¬í˜„-ì½”ë“œ">êµ¬í˜„ ì½”ë“œ</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtAuthenticationFilter</span> <span class="kd">extends</span> <span class="nc">OncePerRequestFilter</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doFilterInternal</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">FilterChain</span> <span class="n">filterChain</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">extractAccessToken</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">refreshToken</span> <span class="o">=</span> <span class="n">extractRefreshToken</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">accessToken</span> <span class="o">&amp;&amp;</span> <span class="n">jwtService</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">accessToken</span><span class="o">))</span> <span class="o">{</span>  <span class="c1">// access tokenì´ ìœ íš¨í•¨</span>
                <span class="nc">GrantedAuthority</span> <span class="n">authority</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleGrantedAuthority</span><span class="o">(</span><span class="s">"ROLE_USER"</span><span class="o">);</span>
                <span class="nc">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="n">authenticationManager</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span><span class="k">new</span> <span class="nc">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">jwtService</span><span class="o">.</span><span class="na">userCheck</span><span class="o">(</span><span class="n">accessToken</span><span class="o">),</span> <span class="kc">null</span><span class="o">,</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">singletonList</span><span class="o">(</span><span class="n">authority</span><span class="o">)));</span>
                <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">authentication</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">extractRefreshToken</span><span class="o">(</span><span class="n">request</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">jwtService</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">UNAUTHORIZED</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>  <span class="c1">// Refreshtokenì´ ìœ íš¨í•¨</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">authenticationFailureHandler</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë‚´ê°€ ë§Œë“  Custom Filterë¥¼ Security Filter Chain ë‚´ë¶€ì— ë™ì‘í•˜ê²Œ ê±¸ì–´ ì¸ì¦ì´ ì™„ë£Œëœë‹¤ë©´ Security Context ë‚´ë¶€ì— Authentication ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.</li>
</ul>

<h3 id="ê°œë°œ-ê³¼ì •-ì¸ì¦-ì ˆì°¨">ê°œë°œ ê³¼ì • ì¸ì¦ ì ˆì°¨</h3>
<ul>
  <li>
    <p>request headerì— ë„£ì–´ì£¼ê¸° ìœ„í•´ instance headerë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ SPAì˜ íŠ¹ì„± ìƒ í˜ì´ì§€ ì´ë™ì´ ì—†ì´ ì´ë£¨ì–´ì ¸ í† í°ì´ ìœ ì§€ê°€ ë˜ì§€ë§Œ ìƒˆë¡œê³ ì¹¨ì„ ëˆ„ë¥´ê¸°ë§Œ í•˜ë©´ access tokenì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œì ì´ ë°œìƒí•œë‹¤. 
ì´ëŠ” access tokenì´ ì‚¬ë¼ì§ˆ ë•Œë§ˆë‹¤ serverì— ì ‘ê·¼í•˜ì—¬ ìƒˆë¡­ê²Œ ë°œê¸‰ë°›ì•„ì•¼í•˜ëŠ” ìƒí™©ì´ ìƒê¸°ê³  ì´ê°€ ë°˜ë³µë˜ë©´ ì„œë²„ì— ê³¼ë¶€í•˜ê°€ ìƒê¸°ê²Œ ëœë‹¤.</p>
  </li>
  <li>
    <p>https://jwt.io/introduction - ê³µì‹ ì†Œê°œê¸€ ì°¸ì¡°</p>
  </li>
</ul>

<p><img src="/assets/img/pjt/jwt.png" alt="jwt" /></p>

<ul>
  <li>ë‹¹ì—°íˆ ì´ë ‡ê²Œ headerì— ë„£ì–´ ë‚´ë ¤ì¤€ë‹¤ëŠ” ìƒê°ë§Œì„ í•˜ê³  ìˆì—ˆë‹¤. ì‹¬ì§€ì–´ secure cookieì™€ headerë¡œ í† í°ì„ ê°ê° ë‚˜ëˆ„ë©´ í•œ ë²ˆ ë” ìˆ¨ê¸°ëŠ”ê²ƒì´ë¯€ë¡œ íƒˆì·¨ë  ìœ„í—˜ì´ ì ë‹¤ê³  ìƒê°í–ˆë‹¤.</li>
  <li>í•˜ì§€ë§Œ ê°œë°œìë„êµ¬ì˜ networkë¥¼ ê¹ŒëŠ” ìˆœê°„ ëª¨ë“  ì •ë³´ëŠ” ë…¸ì¶œë˜ì–´ ë³´ì—¬ì§€ê³  ìˆì—ˆê³  headerëŠ” cookieì²˜ëŸ¼ http only ì„¤ì •ì„ ì§„í–‰í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— JSë¥¼ ì´ìš©í•œ XSS ê³µê²©ì´ ê°€ëŠ¥í–ˆë‹¤. 
â†’ ëª¨ë“  ê±¸ secure cookieë¡œ ë§Œë“¤ì–´ ë‚´ë ¤ì£¼ê³  ê´€ë¦¬í•˜ë„ë¡ ë³€ê²½, ìƒˆë¡œê³ ì¹¨ ë¬¸ì œë¶€í„° XSS ë¬¸ì œê¹Œì§€ í•´ê²°ê°€ëŠ¥ ì´ì œ ì¿ í‚¤ë¥¼ ì´ìš©í•˜ì˜€ì„ ê²½ìš° CSRF ê³µê²©ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ì•Œì•„ë³¼ í•„ìš”ê°€ ìˆë‹¤.</li>
</ul>

<ol>
  <li>ì¶”í›„ ì¸ì¦ ê³¼ì •
    <ul>
      <li>Accessë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ jwtAuthenticationFilterì—ì„œ ì¸ì¦ì„ ë°”ë¡œ ì™„ë£Œí•˜ê³  Authentication ê°ì²´ë¥¼ ë°”ë¡œ ìƒì„±í•´ ê¶Œí•œì„ ì¤„ ìˆ˜ ìˆë‹¤.</li>
      <li>ë§Œì•½ ì—†ë‹¤ë©´, refresh í† í°ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. refresh tokenì´ ì¡´ì¬í•œë‹¤ë©´ í”„ë¡ íŠ¸ì— response errorë¥¼ ë‚´ë ¤ì¤€ë‹¤.</li>
    </ul>
  </li>
  <li>error ë°œìƒ ì‹œ
    <ul>
      <li>í•´ë‹¹ ì—ëŸ¬ê°€ ë°œìƒ ì‹œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ(front application) interceptorê°€ ë™ì‘í•˜ê²Œ ë˜ê³  í•´ë‹¹ interceptorëŠ” auth/silent-refresh requestë¥¼ ìë™ìœ¼ë¡œ ë³´ë‚´ì¤€ë‹¤.</li>
      <li>refresh tokenì´ ìœ íš¨í•˜ë‹¤ë©´ access tokenê³¼ refresh tokenì„ ì¬ë°œê¸‰í•´ì„œ í• ë‹¹í•´ì¤€ë‹¤.</li>
      <li>ë§Œì•½ ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´? ì¸ì¦í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ë¼ê³  ëë‚´ì•¼ëœë‹¤.</li>
    </ul>
  </li>
</ol>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="pjt" /><summary type="html"><![CDATA["Spring Security JWTë¥¼ ì´ìš©í•œ ì¸ì¦/ì¸ê°€"]]></summary></entry><entry><title type="html">[Spring] HTTP ë‹¤ì–‘í•œ í†µì‹  ë°©ë²•</title><link href="http://localhost:4000/categories/javastudy/2023-12-29-javaStudy-urlConnection/" rel="alternate" type="text/html" title="[Spring] HTTP ë‹¤ì–‘í•œ í†µì‹  ë°©ë²•" /><published>2023-12-29T00:00:00+09:00</published><updated>2024-07-02T11:46:47+09:00</updated><id>http://localhost:4000/categories/javastudy/javaStudy-urlConnection</id><content type="html" xml:base="http://localhost:4000/categories/javastudy/2023-12-29-javaStudy-urlConnection/"><![CDATA[<ul>
  <li>TOC
    <hr />
    <h2 id="httpurlconnection">HttpURLConnection</h2>
    <hr />
    <h3 id="ì •ì˜">ì •ì˜</h3>
    <hr />
    <p>public abstract classì¸ URLConnectionì˜ Subclassë¡œ URL ê°„ì˜ í†µì‹  ë§í¬ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. <br />
ê° HttpURLConnection instanceëŠ” ë‹¨ì¼ ìš”ì²­ì„ ë§Œë“œëŠ” ë° ì‚¬ìš©ë˜ë©° ìš”ì²­ í›„ InputStream í˜¹ì€ OutputStreamì—ì„œ close() ë©”ì†Œë“œë¥¼ í˜¸ì¶œ ì‹œ ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œí•  ìˆ˜ ê°€ ìˆë‹¤.
ë˜í•œ, ì„œë²„ì— ë‹¤ë¥¸ ìš”ì²­ì„ ë” ì´ìƒ ë³´ë‚¼ í•„ìš”ê°€ ì—†ì„ ê²½ìš° disconnect() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê²°ì„ í•´ì œí•  ìˆ˜ê°€ ìˆë‹¤. <br />
HttpURLConnectionì€ Javaì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•  í•„ìš”ì„±ì´ ì—†ë‹¤.</p>
  </li>
</ul>

<h3 id="ì˜ˆì‹œ-ì½”ë“œ">ì˜ˆì‹œ ì½”ë“œ</h3>
<hr />
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"url_connection"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="nf">getHttpURLConnection</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">param</span> <span class="o">=</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"ì„¤í˜„"</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.naver.com/v1/search/news.json?query="</span><span class="o">;</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">apiUrl</span> <span class="o">+</span> <span class="n">param</span><span class="o">);</span>

            <span class="nc">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-Naver-Client-Id"</span><span class="o">,</span> <span class="n">clientId</span><span class="o">);</span>
            <span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-Naver-Client-Secret"</span><span class="o">,</span> <span class="n">clientSecret</span><span class="o">);</span>

            <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="s">"UTF-8"</span><span class="o">));</span>

            <span class="nc">String</span> <span class="n">inputLine</span><span class="o">;</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"response"</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>

            <span class="n">con</span><span class="o">.</span><span class="na">disconnect</span><span class="o">();</span>
            <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<h3 id="ê²°ê³¼-í™”ë©´">ê²°ê³¼ í™”ë©´</h3>
<hr />
<p><img src="/assets/img/javaStudy/httpconnection.png" alt="urlConnection" /></p>

<h2 id="resttemplate">RestTemplate</h2>
<hr />
<h3 id="ì •ì˜-1">ì •ì˜</h3>
<p>Public class RestTemplateì€ Spring í”„ë ˆì„ì›Œí¬ì—ì„œ ì œê³µí•˜ëŠ” HTTP í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ê°„ë‹¨í•˜ê²Œ HTTP í†µì‹ ì„ ì§„í–‰í•  ìˆ˜ê°€ ìˆëŠ” ë™ê¸°ì‹ í´ë¼ì´ì–¸íŠ¸ì´ë‹¤.</p>

<h3 id="ì˜ˆì‹œ-ì½”ë“œ-1">ì˜ˆì‹œ ì½”ë“œ</h3>
<hr />
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"rest_template"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="nf">getRestTemplate</span><span class="o">(){</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">param</span> <span class="o">=</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"ì„¤í˜„"</span><span class="o">,</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.naver.com/v1/search/news.json?query="</span> <span class="o">+</span> <span class="n">param</span><span class="o">;</span>

            <span class="nc">HttpHeaders</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpHeaders</span><span class="o">();</span>
            <span class="n">headers</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"X-Naver-Client-Id"</span><span class="o">,</span> <span class="n">clientId</span><span class="o">);</span>
            <span class="n">headers</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">"X-Naver-Client-Secret"</span><span class="o">,</span> <span class="n">clientSecret</span><span class="o">);</span>

            <span class="nc">RestTemplate</span> <span class="n">restTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RestTemplate</span><span class="o">();</span>
            <span class="nc">HttpEntity</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">httpEntity</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpEntity</span><span class="o">&lt;&gt;(</span><span class="n">headers</span><span class="o">);</span>
            <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">responseEntity</span> <span class="o">=</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">exchange</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">,</span> <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">HttpMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">,</span> <span class="n">httpEntity</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">responseEntity</span><span class="o">.</span><span class="na">getBody</span><span class="o">();</span>

            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"response"</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
    <span class="o">}</span>

</code></pre></div></div>

<h3 id="ê²°ê³¼-í™”ë©´-1">ê²°ê³¼ í™”ë©´</h3>
<hr />
<p><img src="/assets/img/javaStudy/restTemplate.png" alt="restTemplate" /></p>

<h2 id="webclient">WebClient</h2>
<hr />
<h3 id="ì •ì˜-2">ì •ì˜</h3>
<hr />
<p>WebClientëŠ” ìŠ¤í”„ë§ 5ì—ì„œ ì†Œê°œëœ ë¹„ë™ê¸° ë° ë…¼ë¸”ë¡í‚¹ ì›¹ ìš”ì²­ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” Reactive web í´ë¼ì´ì–¸íŠ¸ì´ë‹¤.</p>

<h3 id="ì˜ˆì‹œ-ì½”ë“œ-2">ì˜ˆì‹œ ì½”ë“œ</h3>
<hr />
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"web_client"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Mono</span><span class="o">&lt;</span><span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;&gt;</span> <span class="nf">getWebClient</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">param</span> <span class="o">=</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"ì„¤í˜„"</span><span class="o">,</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.naver.com/v1/search/news.json?query="</span> <span class="o">+</span> <span class="n">param</span><span class="o">;</span>

            <span class="nc">WebClient</span> <span class="n">webClient</span> <span class="o">=</span> <span class="nc">WebClient</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">baseUrl</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">defaultHeader</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">CONTENT_TYPE</span><span class="o">,</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">defaultHeader</span><span class="o">(</span><span class="s">"X-Naver-Client-Id"</span><span class="o">,</span> <span class="n">clientId</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">defaultHeader</span><span class="o">(</span><span class="s">"X-Naver-Client-Secret"</span><span class="o">,</span> <span class="n">clientSecret</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>

            <span class="nc">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">webClient</span><span class="o">.</span><span class="na">get</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">block</span><span class="o">();</span>

            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"response"</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="nc">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">map</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">));</span>
    <span class="o">}</span>
</code></pre></div></div>

<h3 id="ê²°ê³¼-í™”ë©´-2">ê²°ê³¼ í™”ë©´</h3>
<hr />
<p><img src="/assets/img/javaStudy/webclient.png" alt="webclient" /></p>

<h3 id="ì¶”ê°€spring-webflux">ì¶”ê°€(Spring WebFlux)</h3>
<hr />
<p>Spring WebFluxëŠ” Spring5ì—ì„œ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ëª¨ë“ˆë¡œ Reactive ìŠ¤íƒ€ì¼ì˜ ê°œë°œì„ ë„ì™€ì¤€ë‹¤.</p>

<ul>
  <li>Flux: 0 ~ Nê°œì˜ ë°ì´í„° ì „ë‹¬</li>
  <li>Mono: 0 ~ 1ê°œì˜ ë°ì´í„° ì „ë‹¬</li>
</ul>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="javaStudy" /><summary type="html"><![CDATA["HttpURLConnection & Rest Template & web client"]]></summary></entry><entry><title type="html">[ì•Œê³ ë¦¬ì¦˜] ìœ„ìƒ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜</title><link href="http://localhost:4000/categories/study/2023-12-26-algorithmStudy-topologicalSort/" rel="alternate" type="text/html" title="[ì•Œê³ ë¦¬ì¦˜] ìœ„ìƒ ì •ë ¬ ì•Œê³ ë¦¬ì¦˜" /><published>2023-12-26T00:00:00+09:00</published><updated>2023-12-26T10:07:43+09:00</updated><id>http://localhost:4000/categories/study/algorithmStudy-topologicalSort</id><content type="html" xml:base="http://localhost:4000/categories/study/2023-12-26-algorithmStudy-topologicalSort/"><![CDATA[<ul>
  <li>TOC
    <hr />
    <h3 id="ìœ„ìƒì •ë ¬-ì•Œê³ ë¦¬ì¦˜ì´ë€">ìœ„ìƒì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì´ë€?</h3>
    <hr />
    <p>ìœ„ìƒì •ë ¬(Topological Sorting) ì•Œê³ ë¦¬ì¦˜ì´ë€ ì„ í›„ ê´€ê³„ê°€ í™•ì‹¤í•œ ìœ í–¥ ê·¸ë˜í”„ì—ì„œ ì„ í›„ ê´€ê³„ì— ë”°ë¼ ì •ë ¬í•˜ê¸° ìœ„í•´ ì´ìš©í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.
ìœ„ìƒì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìš°ì„  ë°©í–¥ ê·¸ë˜í”„ì—¬ì•¼ í•˜ë©° ì‹¸ì´í´ì´ ë°œìƒí•´ì„œëŠ” ì•ˆëœë‹¤. <br />
ê°€ì¥ ìœ ëª…í•œ ì˜ˆì‹œë¡œëŠ” ì„ ìˆ˜ ê³¼ëª©ì„ ì •í•˜ëŠ” ì¼ë¡œ ëŒ€í•™ì—ì„œ íŠ¹ì • ê³¼ëª©ì„ ë“£ê¸° ìœ„í•´ ì–´ë–¤ ì„ ìˆ˜ ê³¼ëª©ì„ ë“£ê³  í•´ë‹¹ ê³¼ëª©ì„ ë“¤ì–´ì•¼ë˜ëŠ”ì§€ ì•Œì•„ë‚´ëŠ” ê²ƒì´ ìˆë‹¤.</p>
  </li>
</ul>

<h3 id="êµ¬í˜„">êµ¬í˜„</h3>
<hr />
<ol>
  <li>ìœ„ìƒ ì •ë ¬ êµ¬í˜„ì„ ìœ„í•œ Graph Class.</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Graph</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

        <span class="kd">public</span> <span class="nf">Graph</span><span class="o">(</span><span class="kt">int</span> <span class="no">N</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">graph</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;());</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGraph</span><span class="o">(</span><span class="kt">int</span> <span class="n">from</span><span class="o">,</span> <span class="kt">int</span> <span class="n">to</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">graph</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">from</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">to</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="nf">getGraph</span><span class="o">(</span><span class="kt">int</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">graph</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">from</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>

<ol>
  <li>Graphì—ì„œ ì •ì ë“¤ì„ ì—°ê²°í•  ë•Œ íŠ¹ì • ì •ì ì— ëª‡ ê°œì˜ ê°„ì„ ì´ ì—°ê²°ë˜ëŠ”ì§€ë¥¼ ë”°ë¡œ ì²´í¬</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nc">Graph</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Graph</span><span class="o">(</span><span class="no">N</span><span class="o">);</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">degree</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="no">N</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">K</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="kt">int</span> <span class="n">from</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">())-</span><span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">to</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">())-</span><span class="mi">1</span><span class="o">;</span>
    
        <span class="n">graph</span><span class="o">.</span><span class="na">setGraph</span><span class="o">(</span><span class="n">from</span><span class="o">,</span> <span class="n">to</span><span class="o">);</span>
        <span class="n">degree</span><span class="o">[</span><span class="n">to</span><span class="o">]++;</span>
    <span class="o">}</span>
</code></pre></div></div>

<ol>
  <li>Main Logic</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">topologicalSort</span><span class="o">(</span><span class="nc">Graph</span> <span class="n">graph</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">degree</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayDeque</span><span class="o">&lt;&gt;();</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">degree</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">degree</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">queue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">while</span> <span class="o">(!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">from</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="na">getGraph</span><span class="o">(</span><span class="n">from</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">to</span> <span class="o">:</span> <span class="n">cur</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">degree</span><span class="o">[</span><span class="n">to</span><span class="o">]--;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">degree</span><span class="o">[</span><span class="n">to</span><span class="o">]</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">queue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">to</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ì½”ë“œì—ì„œ degree ê°’ì´ 0ì´ë¼ë©´ í•´ë‹¹ ì •ì ì— ì—°ê²°ëœ ì •ì ë“¤ì€ ì´ë¯¸ ì²˜ë¦¬ ë˜ì—ˆê±°ë‚˜ ì‹œì‘ ì •ì ì´ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.</li>
  <li>ë§¨ ì²˜ìŒì— ì‹œì‘ ì •ì ì„ ì°¾ì•„ì£¼ê³  Queueë¥¼ ì´ìš©í•´ ê°„ì„ ë“¤ì„ í•˜ë‚˜ì”© ì§€ì›Œë‚˜ê°€ë©´ì„œ ì—°ê²°ëœ ê°„ì„ ì´ ì—†ëŠ” ì •ì ë¶€í„° ë‹¤ì‹œ ì²˜ë¦¬í•´ì¤€ë‹¤.</li>
</ul>

<h3 id="ì°¸ì¡°">ì°¸ì¡°</h3>
<hr />
<p><a href="https://ko.wikipedia.org/wiki/%EC%9C%84%EC%83%81%EC%A0%95%EB%A0%AC">ìœ„í‚¤ë°±ê³¼ ìœ„ìƒì •ë ¬</a></p>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="study" /><summary type="html"><![CDATA["ë‚´ìš© ì •ë¦¬"]]></summary></entry><entry><title type="html">[BOJ] 14891_í†±ë‹ˆë°”í€´</title><link href="http://localhost:4000/categories/algorithm/2023-10-09-algorithm-BOJ_14891/" rel="alternate" type="text/html" title="[BOJ] 14891_í†±ë‹ˆë°”í€´" /><published>2023-10-09T00:00:00+09:00</published><updated>2023-10-09T17:15:32+09:00</updated><id>http://localhost:4000/categories/algorithm/algorithm-BOJ_14891</id><content type="html" xml:base="http://localhost:4000/categories/algorithm/2023-10-09-algorithm-BOJ_14891/"><![CDATA[<blockquote>
  <p><a href="https://www.acmicpc.net/problem/14891">https://www.acmicpc.net/problem/14891</a>
<img src="/assets/img/algo/gear.png" alt="gear" /></p>
</blockquote>

<h2 id="ë¬¸ì œ-ì„¤ëª…">ë¬¸ì œ ì„¤ëª…</h2>
<ul>
  <li>í†±ë‹ˆ ë°”í€´ëŠ” ì´ 4ê°œê°€ ë§ë¬¼ë ¤ìˆìœ¼ë©° í•œ ê°œì˜ í†±ë‹ˆë°”í€´ê°€ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëŒë©´ í•´ë‹¹ í†±ë‹ˆë°”í€´ì™€ ë§ë‹¿ì•„ ìˆëŠ” í†±ë‹ˆë°”í€´ë“¤ì€ ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëŒê²Œëœë‹¤.</li>
  <li>ì´ ë•Œ, í†±ë‹ˆë°”í€´ë¼ë¦¬ ë§ë‹¿ì•„ ìˆëŠ” ë¶€ë¶„ì´ ê°™ì€ ìì„±ì„ ëˆë‹¤ë©´ ë§ë‹¿ì•„ ìˆëŠ” í†±ë‹ˆëŠ” íšŒì „í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
</ul>

<h2 id="í’€ì´-ê³„íš">í’€ì´ ê³„íš</h2>
<h3 id="1-deque-ìë£Œêµ¬ì¡°ë¥¼-í™œìš©í•œ-í†±ë‹ˆë°”í€´-ëŒë¦¬ê¸°ì ˆëŒ€-ì•ˆë¨">1. Deque ìë£Œêµ¬ì¡°ë¥¼ í™œìš©í•œ í†±ë‹ˆë°”í€´ ëŒë¦¬ê¸°(ì ˆëŒ€ ì•ˆë¨!)</h3>
<ul>
  <li>í†±ë‹ˆë°”í€´ê°€ ëŒ ë•Œ deque ìë£Œêµ¬ì¡°ì˜ íŠ¹ì§•ì„ í™œìš©í•´ì„œ ë„£ê³  ë¹¼ê³ ë¥¼ í•˜ëŠ” ê²ƒì„ ìƒê°í–ˆë‹¤.</li>
  <li>ì–‘ìª½ ëì— ëŒ€í•œ ì •ë³´ë§Œ ì•Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§ë‹¿ì•„ ìˆëŠ” ë¶€ë¶„ì´ ê°™ì€ ìì„±ì„ ë„ëŠ”ì§€ ì•„ë‹Œì§€ë¥¼ íŒë³„í•  ìˆ˜ê°€ ì—†ë‹¤.</li>
</ul>

<h3 id="2-bitmaskingì„-í™œìš©í•œ-í†±ë‹ˆë°”í€´-ëŒë¦¬ê¸°">2. Bitmaskingì„ í™œìš©í•œ í†±ë‹ˆë°”í€´ ëŒë¦¬ê¸°</h3>
<ul>
  <li>ì£¼ì–´ì§„ í†±ë‹ˆì˜ ì •ë³´ê°€ 0, 1ë¡œë§Œ ì´ë£¨ì–´ì ¸ìˆëŠ” ê²ƒì„ ë³´ê³  Bitmaskingì„ í™œìš©í•´ì„œ ëŒë¦¬ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê² ë‹¤ê³  ìƒê°í–ˆë‹¤.</li>
  <li>ë§ë‹¿ì•„ìˆëŠ” ë¶€ë¶„ì— ëŒ€í•œ ì¶”ì ë„ ìš©ì´í•˜ê³  í†±ë‹ˆë°”í€´ë¥¼ ëŒë¦¬ëŠ” ê²ƒë„ ë¹ ë¥¸ ì‹œê°„ ì•ˆì— ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì¢‹ì€ ë°©ë²•ì´ë¼ê³  ìƒê°í–ˆë‹¤.</li>
</ul>

<h2 id="í’€ì´-ê³¼ì •">í’€ì´ ê³¼ì •</h2>
<h3 id="1-check-method">1. check Method</h3>
<ul>
  <li>íŠ¹ì • í†±ë‹ˆë°”í€´ë¥¼ ëŒë¦¬ëŠ” ì •ë³´ê°€ ì£¼ì–´ì¡Œì„ ë•Œ ë‚˜ë¨¸ì§€ í†±ë‹ˆë“¤ì€ ì–´ë–»ê²Œ ëŒë¦´ì§€ë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤¬ë‹¤.</li>
  <li>DFS ë°©ì‹ì„ í™œìš©í•´ì„œ ì¶”ì í•´ì£¼ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆë‹¤.</li>
</ul>

<h3 id="2-update-method">2. update Method</h3>
<ul>
  <li>check Methodì—ì„œ í™•ì¸í•œ í†±ë‹ˆë°”í€´ë¥¼ ì–´ëŠ ë°©í–¥ìœ¼ë¡œ ëŒë¦´ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ í™œìš©í•´ í†±ë‹ˆë°”í€´ë¥¼ ëŒë ¤ì¤€ë‹¤.</li>
  <li>ì‹œê²Œ ë°©í–¥ìœ¼ë¡œ ëŒë¦´ ë•ŒëŠ” ëª¨ë‘ ê°™ì§€ë§Œ, ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëŒë¦¬ëŠ” ê²½ìš° ì£¼ì˜í•´ì•¼í•œë‹¤.</li>
  <li>ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëŒë¦´ ê²½ìš°, ì£¼ì–´ì§„ gear ì •ë³´ë¥¼ binaryë¡œ ì „í™˜ ì‹œ ë¬´ì¡°ê±´ 8ìë¦¬ê°€ ë³´ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>
  <li>ê·¸ë ‡ê¸° ë•Œë¬¸ì— binaryStringì„ í™œìš©í•´ì„œ í˜„ì¬ binaryì½”ë“œê°€ 8ìë¦¬ ì´í•˜ì¼ ê²½ìš°ì™€ ì´ìƒì¼ ê²½ìš°ë¥¼ êµ¬ë¶„í•´ì•¼í•œë‹¤.</li>
  <li>8ìë¦¬ ì´í•˜ì¼ ê²½ìš°ëŠ” ê·¸ëƒ¥ shift ì—°ì‚°ìë¥¼ í™œìš©í•˜ë©´ ë˜ì§€ë§Œ ë°˜ëŒ€ì˜ ê²½ìš°ëŠ” ë„˜ì–´ê°€ëŠ” bitë¥¼ ì¶”ì í•´ì„œ ì—…ë°ì´íŠ¸ í•´ì¤˜ì•¼í•œë‹¤.</li>
</ul>

<h3 id="3-answer-method">3. answer Method</h3>
<ul>
  <li>ì£¼ì–´ì§„ ì¡°ê±´ ì¤‘ ëª‡ ë²ˆì§¸ í†±ë‹ˆì˜ 12ì‹œ ë°©í–¥ì— ì–´ë–¤ ìì„±ì„ ë„ëŠ” í†±ë‹ˆê°€ ì˜¤ëŠ”ì§€ì— ë”°ë¼ ì ìˆ˜ í™˜ì‚° ë°©ì‹ì´ ë‹¤ë¥´ë‹¤.</li>
  <li>ì´ë¥¼ ì¶”ì í•´ì£¼ê¸° ìœ„í•´ answer methodë¥¼ ë”°ë¡œ êµ¬í˜„í•´ì£¼ì—ˆë‹¤.</li>
</ul>

<h2 id="êµ¬í˜„-ì½”ë“œ">êµ¬í˜„ ì½”ë“œ</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    <span class="kn">package</span> <span class="nn">boj.gold5</span><span class="o">;</span>
    
    <span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
    
    <span class="cm">/**
    
     - @author ì´ë³‘í—Œ
     - @since 2023/10/01
     - @see https://www.acmicpc.net/problem/14891
     - @git https://github.com/Hunnibs
     - @youtube
     - @performance
     - @category # bitMasking
     - @note */</span>
    
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">BOJ_14891</span> <span class="o">{</span>
        <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">gear</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>  <span class="c1">// í†±ë‹ˆëŠ” ì´ 4ê°œ</span>
        <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">delta</span> <span class="o">=</span> <span class="o">{-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">};</span>
    
        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
            <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
            <span class="nc">StringTokenizer</span> <span class="n">st</span><span class="o">;</span>
            <span class="nc">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">(),</span> <span class="mi">2</span><span class="o">);</span>
            <span class="o">}</span>
    
            <span class="kt">int</span> <span class="no">K</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">K</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
                <span class="kt">int</span> <span class="n">gearNum</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">())</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
                <span class="kt">int</span> <span class="n">dir</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
    
                <span class="n">check</span><span class="o">(</span><span class="n">gearNum</span><span class="o">,</span> <span class="n">dir</span><span class="o">);</span>
            <span class="o">}</span>
    
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">answer</span><span class="o">());</span>
        <span class="o">}</span>
    
        <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">check</span><span class="o">(</span><span class="kt">int</span> <span class="n">gearNum</span><span class="o">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">checked</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>  <span class="c1">// gearê°€ ì–´ëŠ ë°©í–¥ìœ¼ë¡œ ëŒì•„ê°€ëŠ”ì§€ ì²´í¬í•˜ê¸° ìœ„í•œ ë°°ì—´</span>
            <span class="kt">boolean</span><span class="o">[]</span> <span class="n">visited</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>
            <span class="nc">Stack</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">stack</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Stack</span><span class="o">&lt;&gt;();</span>
    
            <span class="kt">int</span> <span class="n">bit</span><span class="o">;</span>
    
            <span class="n">checked</span><span class="o">[</span><span class="n">gearNum</span><span class="o">]</span> <span class="o">=</span> <span class="n">dir</span><span class="o">;</span>  <span class="c1">// ì²˜ìŒ ëŒë¦¬ëŠ” í†±ë‹ˆë°”í€´ëŠ” ì£¼ì–´ì§€ëŠ” ë°©í–¥ìœ¼ë¡œ ëŒë¦°ë‹¤.</span>
            <span class="n">visited</span><span class="o">[</span><span class="n">gearNum</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">gearNum</span><span class="o">);</span>
    
            <span class="k">while</span> <span class="o">(!</span><span class="n">stack</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="na">pop</span><span class="o">();</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>  <span class="c1">// í†±ë‹ˆê°€ ë§ë¬¼ë¦¬ëŠ”ê±´ ìµœëŒ€ 2ë°©í–¥ (ì–‘ ëì„ ì œì™¸)</span>
                    <span class="kt">int</span> <span class="n">next</span> <span class="o">=</span> <span class="n">current</span> <span class="o">+</span> <span class="n">delta</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">next</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">visited</span><span class="o">[</span><span class="n">next</span><span class="o">])</span> <span class="o">{</span>
                        <span class="c1">// ëŒë¦¬ê³  ì‹¶ì€ ê¸°ì–´ê°€ ì™¼ìª½ì— ë§ë¬¼ë ¤ ìˆëŠ”ì§€ ì˜¤ë¥¸ìª½ì— ë§ë¬¼ë ¤ìˆëŠ”ì§€ì— ëŒ€í•œ ë¶„ê¸°</span>
                        <span class="c1">// ëŒë¦´ ìˆ˜ ìˆì„ ë•ŒëŠ” í˜„ì¬ ê¸°ì–´ê°€ ëŒì•„ê°€ëŠ” ë°©í–¥ì— ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë‹¤ìŒ ê¸°ì–´ë¥¼ ëŒë ¤ì•¼í•œë‹¤.</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">current</span> <span class="o">&lt;</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">((((</span><span class="n">gear</span><span class="o">[</span><span class="n">next</span><span class="o">]</span> <span class="o">&amp;</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">)))</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">!=</span> <span class="o">(((</span><span class="n">gear</span><span class="o">[</span><span class="n">current</span><span class="o">]</span> <span class="o">&amp;</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="o">)))</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="o">))</span> <span class="o">{</span>
                                <span class="n">checked</span><span class="o">[</span><span class="n">next</span><span class="o">]</span> <span class="o">=</span> <span class="n">checked</span><span class="o">[</span><span class="n">current</span><span class="o">]</span> <span class="o">*</span> <span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">((((</span><span class="n">gear</span><span class="o">[</span><span class="n">current</span><span class="o">]</span> <span class="o">&amp;</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">!=</span> <span class="o">(((</span><span class="n">gear</span><span class="o">[</span><span class="n">next</span><span class="o">]</span> <span class="o">&amp;</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="o">))</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="o">)))</span> <span class="o">{</span>
                                <span class="n">checked</span><span class="o">[</span><span class="n">next</span><span class="o">]</span> <span class="o">=</span> <span class="n">checked</span><span class="o">[</span><span class="n">current</span><span class="o">]</span> <span class="o">*</span> <span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                        <span class="n">visited</span><span class="o">[</span><span class="n">next</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                        <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">update</span><span class="o">(</span><span class="n">checked</span><span class="o">);</span>
        <span class="o">}</span>
    
        <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">checked</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">bit</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">checked</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëŒë¦¬ëŠ” ê²½ìš°</span>
                    <span class="c1">// bitë¥¼ ìš° Shift í•˜ê²Œ ëœë‹¤ë©´ gearì˜ ê°€ì¥ ì˜¤ë¥¸ìª½ ë¹„íŠ¸ëŠ” ë°€ë ¤ì„œ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ bitì— ì €ì¥í•´ì¤€ë‹¤.</span>
                    <span class="n">bit</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="o">;</span>
                    <span class="n">bit</span> <span class="o">=</span> <span class="n">bit</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="o">;</span>
                    <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">;</span>
                    <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">|</span> <span class="n">bit</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">checked</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëŒë¦¬ëŠ” ê²½ìš°</span>
                    <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">toBinaryString</span><span class="o">(</span><span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]).</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// ì™¼ìª½ìœ¼ë¡œ ë°€ì—ˆì„ ë•Œ í•´ë‹¹ ë¹„íŠ¸ì˜ ê¸¸ì´ê°€ 8 ì´ìƒì´ë¼ë©´ ì‘ì—…ì„ ì‹¤ì‹œí•œë‹¤. -&gt; ì´ìœ ëŠ” 8 ì´í•˜ë©´ ê·¸ëƒ¥ ë°€ë©´ ë˜ê¸° ë•Œë¬¸</span>
                        <span class="n">bit</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">);</span>  <span class="c1">// ê¸¸ì´ê°€ ë„˜ëŠ” ë¹„íŠ¸ë¥¼ ê°€ì ¸ì™€ì„œ ê°€ì¥ ì˜¤ë¥¸ìª½ ë¹„íŠ¸ë¡œ ë„£ì–´ì¤€ë‹¤.</span>
                        <span class="n">bit</span> <span class="o">=</span> <span class="n">bit</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="o">;</span>
                        <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">|</span> <span class="n">bit</span><span class="o">;</span>
                        <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;</span> <span class="mb">0b11111111</span><span class="o">;</span>  <span class="c1">// í†±ë‹ˆê°€ ì´ìƒí•´ì§€ëŠ”ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•´ ê¸¸ì´ 8ì§œë¦¬ í†±ë‹ˆë¡œ ë‹¤ì‹œ ë§Œë“¤ì–´ì£¼ì!</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    
        <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">answer</span><span class="o">()</span> <span class="o">{</span>  <span class="c1">// 12ì‹œ ë°©í–¥ì— ë”°ë¥¸ ì ìˆ˜ ê³„ì‚°ì„ ìœ„í•œ ì½”ë“œ</span>
            <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">((((</span><span class="n">gear</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;</span> <span class="o">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="o">)))</span> <span class="o">&gt;&gt;</span> <span class="mi">7</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// ê°€ì¥ ì™¼ìª½ ë¹„íŠ¸ê°€ 12ì‹œ ë°©í–¥ì´ë‹¤.</span>
                    <span class="n">sum</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="nc">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>


</code></pre></div></div>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="algorithm" /><summary type="html"><![CDATA["ë¹„íŠ¸ë§ˆìŠ¤í‚¹ì„ í™œìš©í•œ í†±ë‹ˆë°”í€´ ëŒë¦¬ê¸°"]]></summary></entry><entry><title type="html">[ì•Œê³ ë¦¬ì¦˜] LIS ì•Œê³ ë¦¬ì¦˜</title><link href="http://localhost:4000/categories/study/2023-09-26-algorithmStudy-LIS/" rel="alternate" type="text/html" title="[ì•Œê³ ë¦¬ì¦˜] LIS ì•Œê³ ë¦¬ì¦˜" /><published>2023-09-26T00:00:00+09:00</published><updated>2023-09-27T09:09:38+09:00</updated><id>http://localhost:4000/categories/study/algorithmStudy-LIS</id><content type="html" xml:base="http://localhost:4000/categories/study/2023-09-26-algorithmStudy-LIS/"><![CDATA[<ul>
  <li>TOC
    <hr />
    <h3 id="lis-ì•Œê³ ë¦¬ì¦˜ì´ë€">LIS ì•Œê³ ë¦¬ì¦˜ì´ë€?</h3>
    <hr />
    <p>ê°€ì¥ ê¸´ ìµœì¥ ì¦ê°€ ìˆ˜ì—´ì„ êµ¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ íŠ¹ì • ìˆ«ìì˜ ë°°ì—´ì´ ì£¼ì–´ì¡Œì„ ë•Œ í•´ë‹¹ ìˆ˜ì—´ì—ì„œ ê°€ì¥ í° ì‚¬ì´ì¦ˆì˜ ì¦ê°€ ìˆ˜ì—´ì„ ë§Œë“¤ì–´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.</p>
  </li>
</ul>

<h3 id="êµ¬í˜„-ë°©ë²•">êµ¬í˜„ ë°©ë²•</h3>
<hr />
<p>êµ¬í˜„ ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰˜ëŠ”ë° DP í…Œì´ë¸”ë§Œì„ ì´ìš©í•´ êµ¬í˜„í•˜ëŠ” ë°©ì‹ê³¼ ë™ì ì¸ DP tableì„ ë§Œë“¤ì–´ ì´ë¶„ íƒìƒ‰ê³¼ í•¨ê»˜ í™œìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.</p>

<ol>
  <li>DP tableì„ í™œìš©í•œ LISì˜ í’€ì´
    <ul>
      <li>í•´ë‹¹ ë°©ë²•ì€ O(N^2)ì˜ ë°©ë²•ìœ¼ë¡œ ì‹œê°„ ìƒ êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ì¸ ë°©ë²•ì´ë‹¤.</li>
      <li>í•˜ì§€ë§Œ ë³„ë„ì˜ ì‘ì—… ì—†ì´ DP tableë§Œ ì˜ í™œìš©í•œë‹¤ë©´ ì†ì‰½ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>tableì˜ columnì—ëŠ” ì£¼ì–´ì§€ëŠ” ìˆ˜ì—´ì˜ ê°’ë“¤ì„ ìˆœì„œëŒ€ë¡œ, rowì—ëŠ” í•´ë‹¹ ìˆ˜ì—´ì˜ ê¸¸ì´ë§Œí¼ ë§Œë“¤ì–´ í…Œì´ë¸” ë‚´ì—ëŠ” ìµœì¥ ê¸¸ì´ê°€ ì–´ëŠì •ë„ê¹Œì§€ ë ì§€ ì €ì¥í•´ì¤€ë‹¤. <br />
ì•„ë˜ ì½”ë“œëŠ” ëˆˆìœ¼ë¡œ ë³´ê¸° ì‰½ê²Œ 2ì°¨ì› í…Œì´ë¸”ë¡œ êµ¬í˜„í•œ ì½”ë“œì´ê³  1ì°¨ì› ë°°ì—´ë¡œë„ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
      <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
          <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
          <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
          <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
              <span class="k">if</span><span class="o">(</span><span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">){</span>
                  <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">j</span><span class="o">];</span>
                  <span class="k">if</span> <span class="o">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">idx</span><span class="o">)</span> <span class="o">{</span>
                      <span class="n">max</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">],</span> <span class="n">max</span><span class="o">);</span>
                  <span class="o">}</span>
              <span class="o">}</span>
          <span class="o">}</span>
          <span class="n">dp</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">idx</span><span class="o">]</span> <span class="o">=</span> <span class="n">max</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>í…Œì´ë¸”ì„ ì—…ë°ì´íŠ¸ í•  ë•ŒëŠ” ìˆ˜ì—´ì˜ íŠ¹ì • indexê°’ì´ ë“¤ì–´ì˜¬ ë•Œ ê·¸ ê°’ë³´ë‹¤ ì‘ì€ ê°’ë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìµœì¥ê¸¸ì´ì— +1ì„ í•´ì£¼ëŠ” ë°©ì‹ì´ë‹¤.</li>
  <li>ìœ„ ì½”ë“œë¥¼ 1ì°¨ì› ë°°ì—´ë¡œ ë” ë‹¨ìˆœí™”í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
      <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
          <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
          <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
          <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">idx</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
              <span class="n">max</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">max</span><span class="o">,</span> <span class="n">dp</span><span class="o">[</span><span class="n">j</span><span class="o">]);</span>
          <span class="o">}</span>
          <span class="n">dp</span><span class="o">[</span><span class="n">idx</span><span class="o">]</span> <span class="o">=</span> <span class="n">max</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>

</code></pre></div></div>

<ul>
  <li>DP tableì„ ì´ìš©í•œ ë°©ì‹ì€ ë§ˆì§€ë§‰ì— í•´ë‹¹ í…Œì´ë¸”ì—ì„œ ê°€ì¥ ìµœëŒ€ì˜ ê¸¸ì´ë¥¼ ì°¾ì•„ì£¼ëŠ” ì—°ì‚°ì„ ë³„ë„ë¡œ ì‹œí–‰í•´ì•¼ëœë‹¤ëŠ” ë¶ˆí¸í•¨ì´ ìˆë‹¤.</li>
</ul>

<ol>
  <li>ì´ë¶„ íƒìƒ‰ì„ í•¨ê»˜ í™œìš©í•œ LISì˜ í’€ì´
    <ul>
      <li>ìœ„ì˜ ë°©ì‹ì€ ë¯¸ë¦¬ ìˆ˜ì—´ì˜ ìˆ«ì í¬ê¸°ë§Œí¼ ë°°ì—´ì„ ë¯¸ë¦¬ í• ë‹¹í•´ì•¼í•´ì„œ ë©”ëª¨ë¦¬ ì ìœ¼ë¡œë„ ë¶€ë‹´ì´ í¬ë‹¤.</li>
      <li>í•´ë‹¹ ë°©ì‹ì€ ë™ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  íƒìƒ‰ ë˜í•œ ì´ë¶„ íƒìƒ‰ì„ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ì‹œê°„ì ìœ¼ë¡œë„ ì´ë“ì´ë‹¤.</li>
      <li>ì‹œê°„ë³µì¡ë„ëŠ” O(NlogN)ì´ë‹¤.</li>
    </ul>
  </li>
</ol>

<p><img src="/assets/img/study/LIS.png" alt="img.png" /></p>

<ul>
  <li>
    <p>í•´ë‹¹ ê·¸ë¦¼ì€ ì—…ë°ì´íŠ¸ ê³¼ì •ì„ ì‹œê°í™” í•œ ê²ƒì´ë‹¤.</p>
  </li>
  <li>
    <p>ì¡°ê±´</p>
    <ol>
      <li>ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆê±°ë‚˜ í˜„ì¬ ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ê°€ì¥ í° ê°’ë³´ë‹¤ ë” í° ê°’ì´ ë“¤ì–´ì˜¤ë©´ ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ëŠ” ëŠ˜ë ¤ì¤€ë‹¤.</li>
      <li>ì´ì™¸ì˜ ê²½ìš°ëŠ” ë“¤ì–´ì˜¤ëŠ” ìˆ«ìë³´ë‹¤ í° ê°’ì„ ëŒ€ì²´í•´ì¤€ë‹¤.(í•´ë‹¹ ê°’ê³¼ ì°¨ì´ê°€ ê°€ì¥ ì‘ì€ ê°’)</li>
    </ol>
  </li>
</ul>

<blockquote>
  <p>ê°’ì„ ë” ì‘ì€ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ì´ìœ  <br />
LIS ë‚´ë¶€ì˜ ê°’ë“¤ì€ ì‘ì€ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ëŠ” ì´ìœ ê°€ í¬ê²Œ ì—†ì§€ë§Œ ë§ˆì§€ë§‰ indexì˜ ê²½ìš° í•´ë‹¹ ê°’ë³´ë‹¤ ì‘ì€ ê°’ì´ ë“¤ì–´ì˜¨ë‹¤ë©´ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤˜ì•¼ì§€ ë‹¤ìŒì— ì˜¬ ìˆ˜ì—´ì´ ê¼¬ì´ì§€ ì•ŠëŠ”ë‹¤. <br />
ê·¸ë¦¼ì„ ì˜ˆì‹œë¡œ ë“¤ìë©´ 1ì€ ë“¤ì–´ì˜¬ë•Œ ì•„ë¬´ ì˜ë¯¸ê°€ ì—†ì§€ë§Œ 11ì—ì„œ 6ìœ¼ë¡œ ë°”ë€ ê²½ìš°ëŠ” ë‹¤ìŒìœ¼ë¡œ 7ì´ ë“¤ì–´ì˜¬ ê²½ìš° ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ ëŠ˜ë¦´ ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê°€ëŠ¥ì¼€í•´ì¤€ë‹¤.</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">target</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">());</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()){</span>
            <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
            <span class="k">continue</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="nc">Collections</span><span class="o">.</span><span class="na">binarySearch</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">target</span><span class="o">))-</span><span class="mi">1</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">idx</span> <span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">){</span>
                <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">target</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
                <span class="n">list</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">idx</span><span class="o">,</span> <span class="n">target</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

</code></pre></div></div>

<h3 id="ì£¼ì˜í• -ì ">ì£¼ì˜í•  ì </h3>
<hr />
<p>í•´ë‹¹ ì•Œê³ ë¦¬ì¦˜ì€ ìµœì¥ ì¦ê°€ ìˆ˜ì—´ ë‚´ìš©ë¬¼ ê·¸ ìì²´ë¥¼ ì¶”ì í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ìœ„ ì•Œê³ ë¦¬ì¦˜ì€ ì–´ë””ê¹Œì§€ë‚˜ ìˆ˜ì—´ì—ì„œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìµœì¥ ì¦ê°€ ìˆ˜ì—´ì˜ ê¸¸ì´ê°€ ì–´ëŠì •ë„ì¼ì§€ë¥¼ ì•Œì•„ë‚´ëŠ” ê²ƒ ë¿ì´ë‹¤.</p>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="study" /><summary type="html"><![CDATA["Longest Increasing Subsequences"]]></summary></entry><entry><title type="html">[BOJ] 1655_ê°€ìš´ë°ë¥¼ ë§í•´ìš”</title><link href="http://localhost:4000/categories/algorithm/2023-09-10-algorithm-BOJ_1655/" rel="alternate" type="text/html" title="[BOJ] 1655_ê°€ìš´ë°ë¥¼ ë§í•´ìš”" /><published>2023-09-10T00:00:00+09:00</published><updated>2023-09-10T21:38:23+09:00</updated><id>http://localhost:4000/categories/algorithm/algorithm-BOJ_1655</id><content type="html" xml:base="http://localhost:4000/categories/algorithm/2023-09-10-algorithm-BOJ_1655/"><![CDATA[<blockquote>
  <p><a href="https://www.acmicpc.net/problem/1655">https://www.acmicpc.net/problem/1655</a></p>
</blockquote>

<h2 id="ë¬¸ì œ-ì„¤ëª…">ë¬¸ì œ ì„¤ëª…</h2>
<ul>
  <li>ì°¨ë¡€ëŒ€ë¡œ ìˆ«ìê°€ í•˜ë‚˜ì”© ì£¼ì–´ì§„ë‹¤.</li>
  <li>ìˆ«ìì˜ ê°œìˆ˜ëŠ” N (1 &lt;= N &lt;= 100,000), ì£¼ì–´ì§€ëŠ” ìˆ«ìëŠ” ì •ìˆ˜ num (-10,000 &lt;= num &lt;= 10,000)</li>
  <li>ìˆœì„œëŒ€ë¡œ ì£¼ì–´ì§€ëŠ” ìˆ˜ë“¤ì— ëŒ€í•˜ì—¬ ì£¼ì–´ì§ˆ ë•Œë§ˆë‹¤ ì¤‘ê°„ê°’ì„ ì°¾ì•„ì„œ ì €ì¥í•´ì•¼í•œë‹¤.</li>
  <li>ë‹¨, ì£¼ì–´ì§„ ìˆ˜ì˜ ê°œìˆ˜ê°€ ì§ìˆ˜ì¼ ë•ŒëŠ” ì¤‘ê°„ê°’ 2ê°œ ì¤‘ ë” ì‘ì€ ê°’ì„ ì €ì¥í•´ì¤€ë‹¤.</li>
</ul>

<blockquote>
  <p>ex) <br />
1ì´ ì£¼ì–´ì§€ë©´ ì¤‘ê°„ê°’ì€ 1ë¡œ ì €ì¥ì´ ëœë‹¤. <br />
ë‹¤ìŒìœ¼ë¡œ 2ê°€ ì£¼ì–´ì§„ë‹¤ë©´ ì¤‘ê°„ê°’ì€ ë” ì‘ì€ 1ì´ ì €ì¥ì´ ë˜ê³ , ë°˜ëŒ€ë¡œ ë” ì‘ì€ -2ê°€ ì£¼ì–´ì§„ë‹¤ë©´ -2ê°€ ì¤‘ê°„ê°’ì´ ëœë‹¤.</p>
</blockquote>

<h2 id="í’€ì´-ê³„íš">í’€ì´ ê³„íš</h2>
<h3 id="1-tree-êµ¬ì¡°-ì‚¬ìš©">1. Tree êµ¬ì¡° ì‚¬ìš©</h3>
<ul>
  <li>Javaì˜ TreeSet í˜¹ì€ TreeMap êµ¬ì¡°ë¥¼ ì‚¬ìš©</li>
  <li>ë„£ì„ ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì •ë ¬í•´ì£¼ê¸° ë•Œë¬¸ì— ì •ë ¬ ì‹œê°„ì´ O(logN)ìœ¼ë¡œ ì§§ê¸° ë•Œë¬¸ì— ì¤‘ê°„ê°’ì„ ì°¾ëŠ”ë‹¤ë©´ ë¹ ë¥´ê²Œ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í–ˆë‹¤.</li>
</ul>

<p><strong>ë¬¸ì œì </strong></p>
<ul>
  <li>TreeSetì€ ì¤‘ë³µì„ ì œê±°í•´ì£¼ê¸° ë•Œë¬¸ì— ê°™ì€ ìˆ˜ê°€ ì£¼ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë³´ì¥ì´ ì—†ëŠ” í˜„ì¬ ë¬¸ì œì—ì„œëŠ” ë°˜ë¡€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</li>
  <li>TreeMapì˜ ê²½ìš°ë„ Keyê°’ì´ ì¤‘ë³µë  ë•Œ Valueê°’ì„ ì–´ë–»ê²Œ ì„¤ì •í•´ì•¼í•˜ëŠ”ì§€ì— ëŒ€í•œ ë¶€ë¶„ì´ ë¬¸ì œê°€ ëœë‹¤.</li>
</ul>

<h3 id="2-heapì˜-ì‚¬ìš©">2. Heapì˜ ì‚¬ìš©</h3>
<ul>
  <li>ë‹¤ìŒìœ¼ë¡œ ì •ë ¬ì„ ë¹ ë¥´ê²Œ í•  ìˆ˜ ìˆëŠ” Heap êµ¬ì¡°ì˜ í™œìš©ë°©ì•ˆì„ ìƒê°</li>
  <li>ì¤‘ë³µì œê±°ë„ ê°€ëŠ¥í•˜ë©° Javaì˜ Collection ì¤‘ Priority Queueë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ìµœì†Œ í™, ìµœëŒ€ í™ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</li>
  <li>ìœ„ì—ì„œ ë§í–ˆë“¯ ìµœëŒ€ í™, ìµœì†Œ í™ì„ êµ¬í˜„í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‘ ê°œë¥¼ ì´ìš©í•˜ì—¬ ì¤‘ê°„ê°’ì„ ì°¾ëŠ” ë¡œì§ì„ ì‘ì„±í•˜ë ¤ í–ˆë‹¤.</li>
</ul>

<blockquote>
  <p>ì´ì™¸ì—ë„ ì´ì§„íƒìƒ‰ì„ í†µí•œ ì •ë ¬ì„ ì‚¬ìš©í•œ ì¤‘ê°„ê°’ ì°¾ê¸°, Dynamic Programming ì í™”ì‹ ì„¸ìš°ê¸° ë“±ë„ ìƒê°í•´ë´¤ì§€ë§Œ ëª¨ë‘ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²°ë¡ ì„ ë‚´ë ¸ë‹¤..</p>
</blockquote>

<h2 id="í’€ì´-ê³¼ì •">í’€ì´ ê³¼ì •</h2>
<h3 id="1-ê¸°ì¤€ì ì—-ë”°ë¥¸-í™-ë‘-ê°œ-ìƒì„±">1. ê¸°ì¤€ì ì— ë”°ë¥¸ í™ ë‘ ê°œ ìƒì„±</h3>
<ul>
  <li>ê¸°ì¤€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ê¸°ì¤€ì ë³´ë‹¤ ì‘ì€ ìˆ«ìë“¤ì„ ê°€ì§€ê³  ìˆì§€ë§Œ í™ìœ¼ë¡œ ë°˜í™˜ ì‹œ ê·¸ ì¤‘ ê°€ì¥ í° ê°’ì„ ë°˜í™˜í•˜ëŠ” í™</li>
  <li>ê¸°ì¤€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ê¸°ì¤€ì ë³´ë‹¤ í° ìˆ«ìë“¤ì„ ê°€ì§€ê³  ìˆì§€ë§Œ í™ìœ¼ë¡œ ë°˜í™˜ ì‹œ ê·¸ ì¤‘ ê°€ì¥ ì‘ì€ ê°’ì„ ë°˜í™˜í•˜ëŠ” í™</li>
  <li>ìœ„ ë‘ ê°œì˜ í™ì˜ ì‚¬ì´ì¦ˆë¥¼ ì´ìš©í•˜ì—¬ ì›ë˜ ìƒê°í–ˆë˜ ë£¨íŠ¸ ë…¸ë“œë¶€í„° ì–‘ìª½ ìì‹ ë…¸ë“œì˜ ìˆ˜ê°€ ê°™ê±°ë‚˜ 1ê°œ ì°¨ì´ì¸ íŠ¸ë¦¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<h3 id="2-push-í•¨ìˆ˜">2. push í•¨ìˆ˜</h3>
<ul>
  <li>ë“¤ì–´ì˜¤ëŠ” ìˆ«ìê°€ ìµœì†Œí™ ìª½ì¸ì§€ ìµœëŒ€í™ìª½ì¸ì§€ë¥¼ íŒë‹¨í•´ì„œ ë„£ì–´ì£¼ëŠ” ë¡œì§ì„ ë‹´ë‹¹í•œë‹¤.</li>
  <li>ë§Œì•½, ìµœì†Œí™ê³¼ ìµœëŒ€í™ì˜ ë°˜í™˜ê°’ë“¤ì˜ ì‚¬ì‡ê°’(=&gt; ì–´ëŠ í™ì—ë„ ì†í•˜ì§€ ëª»í•œë‹¤ë©´) ì‚¬ì´ì¦ˆê°€ ë” ì‘ì€ ìª½ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤.</li>
</ul>

<h3 id="3-update-í•¨ìˆ˜">3. update í•¨ìˆ˜</h3>
<ul>
  <li>ë‘ í™ì˜ ì°¨ì´ëŠ” 1ë³´ë‹¤ ì»¤ì§„ë‹¤ë©´ ì¤‘ê°„ê°’ì„ ì°¾ê¸°ê°€ í˜ë“¤ì–´ì§€ë¯€ë¡œ ë§¤ë²ˆ ì‚¬ì´ì¦ˆë¥¼ ì²´í¬í•˜ë©´ì„œ ë‘ í™ ì‚¬ì´ì¦ˆì˜ ì°¨ì´ê°€ 1ì´ê±°ë‚˜ 0ì´ ë˜ë„ë¡ í•œë‹¤.</li>
</ul>

<h3 id="4-findmiddle-í•¨ìˆ˜">4. findMiddle í•¨ìˆ˜</h3>
<ul>
  <li>ì‚¬ì´ì¦ˆê°€ ë” ê¸´ìª½ì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì´ ì¤‘ê°„ê°’ì´ ëœë‹¤.</li>
  <li>ë§Œì•½, ë‘ í™ì˜ ì‚¬ì´ì¦ˆê°€ ê°™ë‹¤ë©´ ë‹¹ì—°íˆ ìµœëŒ€í™(=&gt; ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ìˆëŠ” ì¤‘ê°„ê°’ë³´ë‹¤ ì‘ì€ ìˆ˜ë“¤ì„ ë„£ì–´ë†“ì€ í™)ì—ì„œ ë°˜í™˜í•œë‹¤.</li>
</ul>

<h2 id="êµ¬í˜„-ì½”ë“œ">êµ¬í˜„ ì½”ë“œ</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="nc">StringTokenizer</span> <span class="n">st</span><span class="o">;</span>

        <span class="kt">int</span> <span class="no">N</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>

        <span class="c1">// main</span>
        <span class="c1">// init - ì´ˆê¸°í™” ê³¼ì •ì´ í•„ìš”, ì²« ë‘ ìˆ˜ë¥¼ ë°›ì•„ì„œ ê°ê° í™ì— ë„£ì–´ì¤€ë‹¤.</span>
        <span class="kt">int</span> <span class="n">first</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">first</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>  <span class="c1">// ì²˜ìŒ ë„£ì€ ìˆ«ìëŠ” ë¬´ì¡°ê±´ ì¤‘ê°„ê°’</span>

        <span class="kt">int</span> <span class="n">second</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">)).</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>  <span class="c1">// ë‘ ë²ˆì§¸ë¡œ ë„£ì€ ìˆ«ìëŠ” ì²«ë²ˆ ì§¸ ìˆ˜ì™€ ë¹„êµí•´ì„œ ë” ì‘ì€ ê°’ì„ ë„£ì–´ì¤€ë‹¤.</span>
        <span class="n">smallSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">first</span><span class="o">,</span><span class="n">second</span><span class="o">));</span>
        <span class="n">largeSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">first</span><span class="o">,</span><span class="n">second</span><span class="o">));</span>

        <span class="c1">// main logic</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">N</span> <span class="o">-</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>
            <span class="n">push</span><span class="o">(</span><span class="n">current</span><span class="o">);</span>
            <span class="n">update</span><span class="o">();</span>
            <span class="n">findMiddle</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sb</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">findMiddle</span><span class="o">(){</span>  <span class="c1">// í™ì˜ ê¸¸ì´ê°€ ë” ê¸´ ìª½ì´ ì¤‘ê°„ê°’ì„ ê°€ì§€ê³  ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.</span>
        <span class="k">if</span><span class="o">(</span><span class="n">smallSide</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">largeSide</span><span class="o">.</span><span class="na">size</span><span class="o">()){</span>
            <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">largeSide</span><span class="o">.</span><span class="na">peek</span><span class="o">()).</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>  <span class="c1">// í™ì˜ ê¸¸ì´ê°€ ê°™ì„ ë•ŒëŠ” ë” ì‘ì€ ìˆ˜ë¥¼ ì¶œë ¥í•´ì•¼í•˜ëŠ” ì¡°ê±´ ë•Œë¬¸ì— ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ë¡œ ë˜ì–´ìˆëŠ” ìª½ì—ì„œ êº¼ë‚´ì˜¨ë‹¤.</span>
            <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">smallSide</span><span class="o">.</span><span class="na">peek</span><span class="o">()).</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(){</span>
        <span class="k">if</span> <span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">smallSide</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="n">largeSide</span><span class="o">.</span><span class="na">size</span><span class="o">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">){</span>  <span class="c1">// ë‘ í™ì˜ ê¸¸ì´ ì°¨ì´ê°€ 2ì¸ ê²½ìš° 1ì´ ë˜ë„ë¡ ê¸¸ì´ ì°¨ì´ë¥¼ ë§ì¶°ì¤€ë‹¤.</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">smallSide</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">largeSide</span><span class="o">.</span><span class="na">size</span><span class="o">()){</span>
                <span class="n">largeSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">smallSide</span><span class="o">.</span><span class="na">poll</span><span class="o">());</span>
            <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
                <span class="n">smallSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">largeSide</span><span class="o">.</span><span class="na">poll</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="kt">int</span> <span class="n">current</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">smallSide</span><span class="o">.</span><span class="na">peek</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">current</span><span class="o">){</span>  <span class="c1">// ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ìˆëŠ” ê°’ë“¤ë³´ë‹¤ ì‘ì€ ê²½ìš° ê·¸ ìª½ìœ¼ë¡œ push</span>
            <span class="n">smallSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">current</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">largeSide</span><span class="o">.</span><span class="na">peek</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">current</span><span class="o">){</span>  <span class="c1">// ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ìˆëŠ” ê°’ë“¤ë³´ë‹¤ í° ê²½ìš° ê·¸ ìª½ìœ¼ë¡œ push</span>
            <span class="n">largeSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">current</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span><span class="o">{</span>  <span class="c1">// ë‘ í™ì˜ ìµœì†Œ ìµœëŒ€ì˜ ì‚¬ì‡ê°’ì´ë¼ë©´ í™ì˜ ì‚¬ì´ì¦ˆê°€ ë” ì‘ì€ ìª½ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤.</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">largeSide</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">smallSide</span><span class="o">.</span><span class="na">size</span><span class="o">()){</span>
                <span class="n">largeSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">current</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span><span class="o">{</span>  <span class="c1">// ë‘ ì‚¬ì´ì¦ˆê°€ ê°™ì„ ë•Œì—ë„ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ëœ í™ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤.</span>
                <span class="n">smallSide</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">current</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="algorithm" /><summary type="html"><![CDATA["Heap ìë£Œêµ¬ì¡°ë¥¼ í†µí•œ ë¹ ë¥¸ ì •ë ¬ê³¼ ì•½ê°„ì˜ ë¨¸ë¦¬ ì‹¸ì›€"]]></summary></entry><entry><title type="html">[BOJ] 2178_ë¯¸ë¡œ íƒìƒ‰</title><link href="http://localhost:4000/categories/algorithm/2023-08-07-algorithm-BOJ_2178/" rel="alternate" type="text/html" title="[BOJ] 2178_ë¯¸ë¡œ íƒìƒ‰" /><published>2023-08-07T00:00:00+09:00</published><updated>2023-08-07T14:52:51+09:00</updated><id>http://localhost:4000/categories/algorithm/algorithm-BOJ_2178</id><content type="html" xml:base="http://localhost:4000/categories/algorithm/2023-08-07-algorithm-BOJ_2178/"><![CDATA[<blockquote>
  <p><a href="https://www.acmicpc.net/problem/2178">https://www.acmicpc.net/problem/2178</a></p>
</blockquote>

<h3 id="ë¬¸ì œ-ì´í•´-ê³¼ì •">ë¬¸ì œ ì´í•´ ê³¼ì •</h3>
<hr />
<p>N x M ë°°ì—´ì´ ì£¼ì–´ì¡Œì„ ë•Œ (1, 1)ì—ì„œ íƒìƒ‰ì„ ì‹œì‘í–‡í—ˆ (N, M)ì— ë„ë‹¬í•˜ëŠ” ìˆœê°„ ì¢…ë£Œ. ì´ ë•Œ ìµœë‹¨ê²½ë¡œë¥¼ êµ¬í•˜ë¼.    <br />
1ì¸ ê²½ìš° ì´ë™í•  ìˆ˜ ìˆëŠ” ê²½ë¡œ, 0ì¸ ê²½ìš° ì´ë™í•  ìˆ˜ ì—†ëŠ” ê²½ë¡œì´ë‹¤. <br />
ì…ë ¥ì€ ë¬´ì¡°ê±´ (1,1)ì—ì„œ (N, M)ìœ¼ë¡œ ì´ë™ ê°€ëŠ¥í•œ ì…ë ¥ì´ ì£¼ì–´ì§„ë‹¤.</p>

<h3 id="í’€ì´-ê³„íš">í’€ì´ ê³„íš</h3>
<hr />
<p>ìµœë‹¨ê²½ë¡œ íƒìƒ‰ì„ ìœ„í•œ BFSë¥¼ í™œìš© <br />
BFSë¥¼ í™œìš©í•œ íƒìƒ‰ì´ ëë‚¬ì„ ë•Œ answer[N-1][M-1]ì— ì €ì¥ëœ ê°’ì„ ì¶œë ¥í•œë‹¤.</p>

<p>í•´ë‹¹ ë°©ë²•ì´ ì–´ë–»ê²Œ ìµœë‹¨ ê²½ë¡œë¥¼ ë³´ì¥í•˜ëŠ”ì§€ì— ëŒ€í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. <br />
visitedë¡œ ë°©ë¬¸í•œ ì¹¸ì— ëŒ€í•œ ì²´í¬ë¥¼ ì§„í–‰í•´ì„œ ë§ì€ ê²½ìš°ì˜ ìˆ˜ ì¤‘ ê°€ì¥ ë¨¼ì € í•´ë‹¹ ì¹¸ì— ë„ì°©í•œ ê²½ìš°ë§Œ ê²½ë¡œë¥¼ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆê²Œ í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<h3 id="êµ¬í˜„">êµ¬í˜„</h3>
<hr />

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	/**

	 @author ì´ë³‘í—Œ
	 @since 2023. 8. 6.
	 @see https://www.acmicpc.net/problem/2178
	 @git
	 @youtube
	 @performance O(N x M x 4) -&gt; ì „ì²´ ë…¸ë“œì™€ ì—°ê²°ëœ ê°„ì„ ì˜ ìˆ˜
	 @category # BFS
	 @note
	 (0,0)ë¶€í„° (N-1, M-1)ê¹Œì§€ ê°€ëŠ” ê°€ì¥ ìµœë‹¨ê²½ë¡œ êµ¬í•˜ê¸°

	 # BFS íƒìƒ‰ ì‹œ ë§ˆì§€ë§‰ì— ìµœë‹¨ê²½ë¡œê°€ ì €ì¥ë  ìˆ˜ ë°–ì— ì—†ëŠ” ì´ìœ ëŠ” visited ë°°ì—´ì„ ì‚¬ìš©í•´ ë¨¼ì € ë°©ë¬¸í•œ ê²½ë¡œê°€ ìˆì„ ê²½ìš°ì—ëŠ” ì—…ë°ì´íŠ¸ê°€ ë˜ì§€ ëª»í•˜ê²Œ ë§‰ê¸° ë•Œë¬¸ì´ë‹¤.
	 */

	import java.io.BufferedReader;
	import java.io.IOException;
	import java.io.InputStreamReader;
	import java.util.ArrayDeque;
	import java.util.ArrayList;
	import java.util.Deque;
	import java.util.StringTokenizer;

	class Info{
		int r;
		int c;
		public Info(int r, int c) {
			this.r = r;
			this.c = c;
		}
	}

	public class BOJ_02178 {
		static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		static StringTokenizer st;
		static StringBuilder sb = new StringBuilder();

		static int N, M, row, col, tr, tc;
		static int[][] delta = {{-1, 0}, {0, 1}, {1, 0}, {0, -1}};
		static int[][] answer;
		static char[][] maze;
		static boolean[][] visited;
		static Deque&lt;Info&gt; dq = new ArrayDeque&lt;&gt;();

		public static void main(String[] args) throws IOException {
			// input
			st = new StringTokenizer(br.readLine());
			N = Integer.parseInt(st.nextToken());
			M = Integer.parseInt(st.nextToken());

			maze = new char[N][M];
			answer = new int[N][M];
			visited = new boolean[N][M];
			String S;
			for (int r = 0; r &lt; N; r++) {
				S = br.readLine();
				maze[r] = S.toCharArray();
			}

			// main
			answer[0][0] = 1;
			visited[0][0] = true;
			dq.offer(new Info(0, 0));
			bfs();

			System.out.println(answer[N-1][M-1]);
		}

		private static void bfs(){
			while(!dq.isEmpty()) {
				row = dq.peekFirst().r;
				col = dq.pollFirst().c;
				for (int i = 0; i &lt; 4; i++) {
					tr = row + delta[i][0];
					tc = col + delta[i][1];
					if (isIn() &amp;&amp; !visited[tr][tc] &amp;&amp; maze[tr][tc] == '1') {
						visited[tr][tc] = true;
						answer[tr][tc] = answer[row][col]+1;
						dq.add(new Info(tr, tc));
					}
				}
			}
		}

		private static boolean isIn(){
			if (tr &gt;= 0 &amp;&amp; tr &lt; N &amp;&amp; tc &gt;= 0 &amp;&amp; tc &lt; M) {
				return true;
			} else{
				return false;
			}
		}
	}

</code></pre></div></div>

<h3 id="ë¬¸ì œ-í’€ì´-í›„ê¸°">ë¬¸ì œ í’€ì´ í›„ê¸°</h3>
<hr />
<p>ë¬¸ì œë¥¼ ë³¸ ì´í›„ BFSë¥¼ í™œìš©í•œ ìµœë‹¨ê²½ë¡œë¼ëŠ” ê²ƒì„ ë°”ë¡œ ì•Œì•˜ì§€ë§Œ ì§œê³  ë‚˜ì„œ ìƒê°í•´ë³´ë©´ì„œ ì´ ë°©ì‹ì´ ì™œ ìµœë‹¨ê²½ë¡œë¥¼ ë³´ì¥í•˜ëŠ”ê°€ì— ëŒ€í•œ ê¶ê¸ˆì¦ì´ ìƒê²¼ë‹¤. ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ ë•Œ ì–´ë–¤ ë°©ì‹ì„ ì™œ ì¨ì•¼í•˜ëŠ”ì§€ì— ëŒ€í•œ ìƒê°ì„ í•˜ë©´ì„œ ê³µë¶€í•  í•„ìš”ê°€ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<p>ì´ ì†Œìš”ì‹œê°„: 0H 50M</p>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="algorithm" /><summary type="html"><![CDATA["BFS ë¬¸ì œ"]]></summary></entry><entry><title type="html">[BOJ] 11660_êµ¬ê°„ í•© êµ¬í•˜ê¸° 5</title><link href="http://localhost:4000/categories/algorithm/2023-08-02-algorithm-BOJ_11660/" rel="alternate" type="text/html" title="[BOJ] 11660_êµ¬ê°„ í•© êµ¬í•˜ê¸° 5" /><published>2023-08-02T00:00:00+09:00</published><updated>2023-08-07T15:00:42+09:00</updated><id>http://localhost:4000/categories/algorithm/algorithm-BOJ_11660</id><content type="html" xml:base="http://localhost:4000/categories/algorithm/2023-08-02-algorithm-BOJ_11660/"><![CDATA[<blockquote>
  <p><a href="https://www.acmicpc.net/problem/11660">https://www.acmicpc.net/problem/11660</a></p>
</blockquote>

<h3 id="ë¬¸ì œ-ì´í•´-ê³¼ì •">ë¬¸ì œ ì´í•´ ê³¼ì •</h3>
<hr />
<p>N x N í¬ê¸°ì˜ ë°°ì—´ì´ ì£¼ì–´ì§„ë‹¤. Nì˜ ë²”ìœ„ëŠ” 1 ~ Nê¹Œì§€ë¡œ (x1, y1), (x2, y2)ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ì¢Œí‘œ í‰ë©´ì—ì„œ (x2 - x1) x (y2 - y1)ì˜ ë©´ì ì— í•´ë‹¹í•˜ëŠ” ì‚¬ê°í˜• êµ¬ê°„ ì•ˆì˜ í•©ì„ êµ¬í•˜ë©´ ëœë‹¤.</p>

<p><img src="/assets/img/algo/sectionSum.png" alt="sectionSum" /></p>

<p>ìœ„ ì‚¬ì§„ì€ (2, 2) ë¶€í„° (4, 3)ê¹Œì§€ì˜ êµ¬ê°„ì˜ ì˜ˆì‹œì´ë‹¤.</p>

<h3 id="í’€ì´-ê³„íš">í’€ì´ ê³„íš</h3>
<hr />
<p>íŠ¹ì • êµ¬ê°„ í•©ì„ êµ¬í•˜ëŠ” ê²½ìš° êµ¬ê°„ì´ ì£¼ì–´ì§ˆ ë•Œ ë§ˆë‹¤ ì—°ì‚°ì„ í•œë‹¤ë©´ ìµœì•…ì˜ ê²½ìš° N * N ë°°ì—´ ì „ì²´ì˜ êµ¬ê°„ í•©ì„ Më²ˆ ë§Œí¼ êµ¬í•´ì•¼í•œë‹¤.</p>

<blockquote>
  <p>O(M * N^2)</p>
</blockquote>

<p>ë³„ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ì„ ì“°ì§€ ì•Šê³  ìˆ˜í–‰í–ˆì„ ë•Œì˜ ì—°ì‚° ì‹œê°„ì´ë‹¤.</p>

<p>ê·¸ë˜ì„œ DP ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•´ í…Œì´ë¸”ì— (1, 1)ë¶€í„° (x, y)ê¹Œì§€ì˜ êµ¬ê°„ì˜ í•©ì„ ë¯¸ë¦¬ ì €ì¥í•´ë†“ê³  í•„ìš”í•  ë•Œ êº¼ë‚´ì“°ëŠ” ë°©ë²•ì„ ìƒê°í–ˆë‹¤.</p>

<p><img src="/assets/img/algo/sum.jpg" alt="Sum" /></p>

<p>êº¼ë‚´ì“¸ ë•ŒëŠ” í•´ë‹¹ ì‚¬ì§„ê³¼ ê°™ì´ íŒŒë€ìƒ‰ êµ¬ê°„ì˜ í•©ì„ êµ¬í•˜ê¸° ìœ„í•´ì„œ ì „ì²´ ë°°ì—´ì—ì„œ ë¹¨ê°„ìƒ‰ê³¼ ë…¸ë€ìƒ‰ êµ¬ê°„ì˜ í•©ì„ ë¹¼ì£¼ê³  ì¤‘ë³µë˜ëŠ” êµ¬ê°„ì„ ë”í•´ì¤€ë‹¤. <br />
ì •ë¦¬í•˜ë©´, â€˜íŒŒë€ êµ¬ê°„ = ì „ì²´ êµ¬ê°„ - (ë¹¨ê°„ êµ¬ê°„ + ë…¸ë€ êµ¬ê°„) + ì¤‘ë³µ êµ¬ê°„â€™ ì´ë‹¤. <br />
(0, 0)ë¶€í„° íŠ¹ì • êµ¬ê°„ê¹Œì§€ì˜ í•©ì„ ë¯¸ë¦¬ ì •ë¦¬í•´ë†“ëŠ”ë‹¤ë©´ ìµœì•…ì˜ ê²½ìš°ì—ë„ ìƒìˆ˜ë²ˆì˜ ì—°ì‚°ë§Œìœ¼ë¡œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>

<blockquote>
  <p>O(M)</p>
</blockquote>

<p>â€™â€™â€™</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// DP table ìƒì„±
dp[r][c] = dp[r-1][c] + dp[r][c-1] + (r, c) ê°’ - dp[r-1][c-1]

// êµ¬ê°„ í•© 
dp[x2][y2] - dp[x2][y1-1] - dp[x1-1][y2] + dp[x1-1][y1-1]
</code></pre></div></div>

<p>â€™â€™â€™</p>

<blockquote>
  <p>DP tableì„ ë§Œë“¤ ë•ŒëŠ” ë°°ì—´ë¡œ êµ¬í•  ê²½ìš° í•´ë‹¹ DPì¹¸ì˜ ì™¼ìª½ê³¼ ìœ„ìª½ì„ ë”í•˜ë¯€ë¡œ 0ë²ˆ rowì™€ colì„ 0ìœ¼ë¡œ íŒ¨ë”©í•´ì¤˜ì•¼ì§€ outOfIndexë¥¼ ê²ªì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<h3 id="êµ¬í˜„">êµ¬í˜„</h3>
<hr />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    public static void main(String[] args) throws IOException{
		// TODO Auto-generated method stub
		st = new StringTokenizer(br.readLine());
		N = Integer.parseInt(st.nextToken());
		M = Integer.parseInt(st.nextToken());
		
		dp = new int[N+1][N+1];
		
		for (int r = 1; r &lt;= N; r++) {
			st = new StringTokenizer(br.readLine());
			for (int c = 1; c &lt;= N; c++) {
				dp[r][c] = dp[r-1][c] + dp[r][c-1] + Integer.parseInt(st.nextToken()) - dp[r-1][c-1];
			}
		}
		
		for (int i = 0; i &lt; M; i++) {
			st = new StringTokenizer(br.readLine());
			
			x1 = Integer.parseInt(st.nextToken());
			y1 = Integer.parseInt(st.nextToken());
			x2 = Integer.parseInt(st.nextToken());
			y2 = Integer.parseInt(st.nextToken());
			
			sb.append(dp[x2][y2] - dp[x2][y1-1] - dp[x1-1][y2] + dp[x1-1][y1-1]).append("\n");
		}
		
		System.out.println(sb);
	}

</code></pre></div></div>

<h3 id="ë¬¸ì œ-í’€ì´-í›„ê¸°">ë¬¸ì œ í’€ì´ í›„ê¸°</h3>
<hr />
<p>êµ¬ê°„ í•©ì„ 2ì°¨ì› ë°°ì—´ DP tableë¡œ ë°›ì•„ì£¼ê³  ìˆ˜ì‹ë§Œ ì •ë¦¬í•œë‹¤ë©´ êµ¬í˜„ì—ëŠ” í° ë¬¸ì œê°€ ì—†ëŠ” ë¬¸ì œì˜€ë‹¤. ë‹¤ë§Œ ì œëŒ€ë¡œ ìˆ˜ì‹ì„ ì •ë¦¬í•˜ì§€ ì•Šê³  êµ¬í˜„í–ˆë‹¤ê°€ ìˆ˜ì‹ì´ ê¼¬ì—¬ì„œ ë§ì´ í—¤ë©”ëŠ” ê²½ìš°ê°€ ë°œìƒí•´ì„œ DP Tableì„ í™œìš©í•˜ë ¤ë©´ í™•ì‹¤í•˜ê²Œ ì •ë¦¬ë¥¼ í•˜ê³  êµ¬í˜„ì„ ì‹œì‘í•  í•„ìš”ê°€ ìˆì–´ë³´ì¸ë‹¤. <br />
ì´ ì†Œìš”ì‹œê°„ : 0H 30M</p>]]></content><author><name>&lt;Lee&gt; &lt;ByungHeon&gt;</name><email>&lt;cqqudgjs@hufs.ac.kr&gt;</email></author><category term="categories" /><category term="algorithm" /><summary type="html"><![CDATA["DP ë¬¸ì œ"]]></summary></entry></feed>